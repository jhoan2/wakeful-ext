(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{78581:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(80768)}])},80768:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return se}});var n=r(34051),a=r.n(n),o=r(85893),s=r(67294),i=r(26885),u=r(95350),c=r(37887),d=r(50319);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function f(e,t,r,n,a,o,s){try{var i=e[o](s),u=i.value}catch(c){return void r(c)}i.done?t(u):Promise.resolve(u).then(n,a)}function h(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function s(e){f(o,n,a,s,i,"next",e)}function i(e){f(o,n,a,s,i,"throw",e)}s(void 0)}))}}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],s=!0,i=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);s=!0);}catch(u){i=!0,a=u}finally{try{s||null==r.return||r.return()}finally{if(i)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function m(){var e=g(["\n    mutation UPDATE_NOTE($input: UpdateCardInput!) {\n        updateCard(input: $input) {\n          document {\n            id\n            annotation\n          }\n        }\n      }"]);return m=function(){return e},e}function x(){var e=g(['\n      query GET_CARDS_PER_URL {\n          icarusResourceIndex(\n            first: 1\n            filters: {where: {url: {equalTo: "','"}}}\n          ) {\n            edges {\n              node {\n                title\n                cards(\n                  first: 10\n                  filters: {where: {deleted: {equalTo: false}}}\n                ) {\n                  edges {\n                    node {\n                      id\n                      pageYOffset\n                      resourceId\n                      quote\n                      annotation\n                    }\n                  }\n                }\n              }\n            }\n          }\n      }']);return x=function(){return e},e}function b(e){var t=e.content,r=e.currentTab,n=function(e,t){var r=document.body.scrollHeight;if(t!==r){var n=e/t*r-20;window.scrollTo(0,n)}else e-=20,window.scrollTo(0,e)},i=(0,s.useState)(!1),c=i[0],l=i[1],f=(0,s.useState)(""),g=f[0],b=f[1],v=t.node,w=v.id,y=v.quote,j=v.annotation,C=v.pageYOffset,k=v.scrollHeight,N=r.id,I=r.url,L=(0,u.Ps)(m()),S=(0,u.Ps)(x(),I),H=p((0,d.D)(L,{onCompleted:function(){return l(!1)}}),2),T=H[0],M=H[1],V=(M.data,M.loading),A=M.error,O=p((0,d.D)(L,{onCompleted:function(){return l(!1)},refetchQueries:[{query:S}]}),2),P=O[0],Z=O[1],z=(Z.data,Z.loading,Z.error,function(){var e=h(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T({variables:{input:{id:w,content:{updatedAt:(new Date).toISOString(),annotation:g}}}});case 2:b("");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),B=function(){var e=h(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P({variables:{input:{id:w,content:{updatedAt:(new Date).toISOString(),deleted:!0}}}});case 2:b("");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=h(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,chrome.scripting.executeScript({target:{tabId:N},func:n,args:[C,k]});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return V?"Submitting...":A?"Submission error! ".concat(A.message):y||j?(0,o.jsxs)("div",{className:"border-2 rounded relative p-6",children:[(0,o.jsx)("button",{className:"absolute top-0 right-1 text-red-300 hover:bg-red-600 rounded-md p-1",onClick:function(){return B()},children:"X"}),(0,o.jsx)("button",{className:"absolute bottom-0 left-1 hover:bg-gray-600 rounded-md p-1",onClick:function(){c?(l(!1),document.getElementById("update-note".concat(w)).classList.remove("hidden")):(document.getElementById("update-note".concat(w)).classList.add("hidden"),l(!0))},children:c?(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-3.5 h-3.5 text-gray-300",children:(0,o.jsx)("path",{d:"M12.9999 16.1716L18.3638 10.8076L19.778 12.2218L11.9999 20L4.22168 12.2218L5.63589 10.8076L10.9999 16.1716V4H12.9999V16.1716Z"})}):(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-3.5 h-3.5 text-gray-300",children:(0,o.jsx)("path",{d:"M12.9999 7.82843V20H10.9999V7.82843L5.63589 13.1924L4.22168 11.7782L11.9999 4L19.778 11.7782L18.3638 13.1924L12.9999 7.82843Z"})})}),(0,o.jsx)("p",{className:"italic border rounded p-2 hover:bg-gray-100",onClick:function(){return E()},children:y}),j?(0,o.jsx)("p",{className:"pt-2",children:j}):null,(0,o.jsxs)("div",{id:"update-note".concat(w),className:"flex flex-col pt-2 hidden",children:[(0,o.jsx)("label",{children:(0,o.jsx)("textarea",{placeholder:"Add Note Here",className:"w-full h-12",value:g,onChange:function(e){return b(e.target.value)}})}),(0,o.jsx)("div",{className:"flex justify-end",children:(0,o.jsx)("button",{onClick:function(){return z()},className:"py-3 px-4 inline-flex justify-center items-center gap-2 rounded-md border border-transparent font-semibold bg-blue-500 text-white hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all text-sm dark:focus:ring-offset-gray-800",children:"Save"})})]})]}):null}function v(){return(0,o.jsx)("div",{className:"flex-grow flex justify-center items-center",children:(0,o.jsxs)("div",{className:"flex flex-col items-center",children:[" ",(0,o.jsx)("div",{className:"rounded-full bg-gray-200 p-10 inline-flex justify-center items-center",children:(0,o.jsx)("img",{src:"/next-assets/no-content-cat.png",className:"w-40 h-40 object-cover rounded-full",alt:"No Content Cat Image"})}),(0,o.jsx)("p",{className:"mt-4 text-2xl font-semibold text-gray-800",children:"No content yet"})]})})}function w(e){var t=e.data,r=e.currentTab;if(!t||0===(null===t||void 0===t?void 0:t.length))return(0,o.jsx)(v,{});null===t||void 0===t||t.edges;return(0,o.jsx)("div",{className:"m-2 space-y-2",children:t.map((function(e){return(0,o.jsx)(b,{currentTab:r,content:e},e.node.id)}))})}function y(e){var t=e.message;return(0,o.jsx)("div",{className:"flex h-screen",children:(0,o.jsx)("div",{className:"flex-grow flex justify-center items-center",children:(0,o.jsxs)("div",{className:"flex flex-col items-center",children:[(0,o.jsx)("div",{className:"rounded-full bg-gray-200 p-10 inline-flex justify-center items-center",children:(0,o.jsx)("img",{src:"/next-assets/error-blue-cat.png",className:"w-40 h-40 object-cover rounded-full",alt:"Error blue cat image"})}),(0,o.jsx)("p",{className:"mt-4 text-2xl font-semibold text-gray-800",children:t})]})})})}function j(){return(0,o.jsxs)("div",{className:"space-y-2 max-w-md",children:[(0,o.jsxs)("div",{className:"border-2 rounded relative p-6 animate-pulse",children:[(0,o.jsx)("button",{className:"absolute top-0 right-1 text-slate-300 bg-slate-400 rounded-md p-1",children:"X"}),(0,o.jsx)("button",{className:"absolute bottom-0 left-1 bg-slate-400 rounded-md p-1",children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-3.5 h-3.5 text-gray-300",children:(0,o.jsx)("path",{d:"M12.9999 16.1716L18.3638 10.8076L19.778 12.2218L11.9999 20L4.22168 12.2218L5.63589 10.8076L10.9999 16.1716V4H12.9999V16.1716Z"})})}),(0,o.jsx)("div",{className:"italic border rounded p-2 bg-slate-400"}),(0,o.jsx)("div",{className:"italic border rounded p-2 bg-slate-400"}),(0,o.jsx)("div",{className:"italic border rounded p-2 bg-slate-400"})]}),(0,o.jsxs)("div",{className:"border-2 rounded relative p-6 animate-pulse",children:[(0,o.jsx)("button",{className:"absolute top-0 right-1 text-slate-300 bg-slate-400 rounded-md p-1",children:"X"}),(0,o.jsx)("button",{className:"absolute bottom-0 left-1 bg-slate-400 rounded-md p-1",children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-3.5 h-3.5 text-gray-300",children:(0,o.jsx)("path",{d:"M12.9999 16.1716L18.3638 10.8076L19.778 12.2218L11.9999 20L4.22168 12.2218L5.63589 10.8076L10.9999 16.1716V4H12.9999V16.1716Z"})})}),(0,o.jsx)("div",{className:"italic border rounded p-2 bg-slate-400"}),(0,o.jsx)("div",{className:"italic border rounded p-2 bg-slate-400"}),(0,o.jsx)("div",{className:"italic border rounded p-2 bg-slate-400"})]})]})}function C(){var e,t,r=(e=["\n  query MyQuery ($url: String) {\n    viewer {\n      cardList(\n        filters: {where: {deleted: {equalTo: false}, url: {equalTo: $url}}}\n        first: 10\n      ) {\n        edges {\n          node {\n            id\n            annotation\n            cid\n            createdAt\n            pageYOffset\n            quote\n            scrollHeight\n            updatedAt\n            videoTime\n          }\n        }\n      }\n    }\n  }\n  "],t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})));return C=function(){return r},r}function k(e){var t,r=e.currentTab,n=(e.setCurrentResourceId,r.url),a=((0,i.c)().composeClient.id,(0,u.Ps)(C())),s=(0,c.a)(a,{variables:{url:n}}),d=s.loading,l=s.error,f=s.data;s.fetchMore;if(d)return(0,o.jsx)(j,{});if(l)return(0,o.jsx)(y,{message:l.message});var h=null===(t=f.viewer)||void 0===t?void 0:t.cardList.edges;return(0,o.jsx)("div",{className:"dark:text-white h-screen flex justify-center items-center",children:f?(0,o.jsx)(w,{data:h,currentTab:r}):(0,o.jsx)(v,{})})}function N(e,t,r,n,a,o,s){try{var i=e[o](s),u=i.value}catch(c){return void r(c)}i.done?t(u):Promise.resolve(u).then(n,a)}function I(e){e.styles;var t=e.subtitle,r=(e.currentTime,e.currentTabId),n=Math.floor(parseInt(t.start)),s=function(e){var t=document.querySelector(".html5-main-video");t&&(t.currentTime=e)},i=function(){var e,t=(e=a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.start,e.next=3,chrome.scripting.executeScript({target:{tabId:r},func:s,args:[n]});case 3:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function s(e){N(o,n,a,s,i,"next",e)}function i(e){N(o,n,a,s,i,"throw",e)}s(void 0)}))});return function(e){return t.apply(this,arguments)}}();return(0,o.jsx)("div",{id:n,className:"p-2 m-2 border border-gray-300 rounded-lg hover:bg-gray-100 text-md max-w-md ",onClick:function(){return i(t)},children:t.text},t.start)}function L(){return(0,o.jsxs)("div",{className:"p-2 m-2 border border-gray-300 rounded-lg max-w-md animate-pulse",children:[(0,o.jsx)("div",{className:"mt-1 w-full h-4 bg-slate-400"}),(0,o.jsx)("div",{className:"mt-1 w-full h-4 bg-slate-400"})]})}function S(e){var t=e.currentTabId,r=e.subtitles,n=e.currentTime,a=(0,s.useState)(0),i=a[0],u=a[1];if(i!==n){var c=Math.floor(n).toString(),d=document.getElementById(c);d&&(d.scrollIntoView({behavior:"smooth",block:"end"}),u(n))}return(0,o.jsx)("div",{children:r.map((function(e){return(0,o.jsx)(I,{subtitle:e,currentTime:n,currentTabId:t},e.start)}))})}function H(e){var t=e.currentTab;return(0,o.jsx)("div",{children:(0,o.jsx)(k,{currentTab:t})})}var T=r(27662),M=r(54929);function V(e){var t=e.editor;return(0,o.jsxs)("div",{className:"flex center border-2 space-x-2 shadow-md bg-white",children:[(0,o.jsx)("div",{className:"hover:bg-gray-200 flex align-center",children:(0,o.jsx)("button",{onClick:function(){return t.chain().focus().toggleBold().run()},className:t.isActive("bold")?"is-active":"",children:(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",children:[(0,o.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"}),(0,o.jsx)("path",{d:"M8 11h4.5a2.5 2.5 0 1 0 0-5H8v5zm10 4.5a4.5 4.5 0 0 1-4.5 4.5H6V4h6.5a4.5 4.5 0 0 1 3.256 7.606A4.498 4.498 0 0 1 18 15.5zM8 13v5h5.5a2.5 2.5 0 1 0 0-5H8z"})]})})}),(0,o.jsx)("div",{className:"hover:bg-gray-200 flex align-center",children:(0,o.jsx)("button",{onClick:function(){return t.chain().focus().toggleItalic().run()},className:t.isActive("italic")?"is-active":"",children:(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",children:[(0,o.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"}),(0,o.jsx)("path",{d:"M15 20H7v-2h2.927l2.116-12H9V4h8v2h-2.927l-2.116 12H15z"})]})})}),(0,o.jsx)("div",{className:"hover:bg-gray-200 flex align-center",children:(0,o.jsx)("button",{onClick:function(){return t.chain().focus().toggleStrike().run()},className:t.isActive("strike")?"is-active":"",children:(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",children:[(0,o.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"}),(0,o.jsx)("path",{d:"M17.154 14c.23.516.346 1.09.346 1.72 0 1.342-.524 2.392-1.571 3.147C14.88 19.622 13.433 20 11.586 20c-1.64 0-3.263-.381-4.87-1.144V16.6c1.52.877 3.075 1.316 4.666 1.316 2.551 0 3.83-.732 3.839-2.197a2.21 2.21 0 0 0-.648-1.603l-.12-.117H3v-2h18v2h-3.846zm-4.078-3H7.629a4.086 4.086 0 0 1-.481-.522C6.716 9.92 6.5 9.246 6.5 8.452c0-1.236.466-2.287 1.397-3.153C8.83 4.433 10.271 4 12.222 4c1.471 0 2.879.328 4.222.984v2.152c-1.2-.687-2.515-1.03-3.946-1.03-2.48 0-3.719.782-3.719 2.346 0 .42.218.786.654 1.099.436.313.974.562 1.613.75.62.18 1.297.414 2.03.699z"})]})})})]})}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function O(e,t,r,n,a,o,s){try{var i=e[o](s),u=i.value}catch(c){return void r(c)}i.done?t(u):Promise.resolve(u).then(n,a)}function P(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function s(e){O(o,n,a,s,i,"next",e)}function i(e){O(o,n,a,s,i,"throw",e)}s(void 0)}))}}function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],s=!0,i=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);s=!0);}catch(u){i=!0,a=u}finally{try{s||null==r.return||r.return()}finally{if(i)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return A(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return A(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(){var e,t,r=(e=["\n    mutation ADD_NOTE($input: CreateCardInput!) {\n        createCard(input: $input) {\n          document {\n            id\n          }\n        }\n      }"],t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})));return z=function(){return r},r}function B(e){var t=e.currentTab,r=(e.youtubeId,e.currentResourceId),n=e.setCurrentResourceId,c=e.createNewYoutubeResource,l=e.setYoutubeOpenAddNote,f=((0,i.c)().composeClient,t.id,(0,s.useState)(!1)),h=f[0],p=f[1],g=(0,s.useState)(null),m=g[0],x=g[1],b=(0,u.Ps)(z()),v=Z((0,d.D)(b,{onCompleted:function(){return l(!1)}}),2),w=v[0],y=v[1],j=(y.data,y.loading),C=y.error,k=(0,T.jE)({extensions:[M.Z],editorProps:{attributes:{class:"prose prose-md lg:prose-lg dark:prose-invert outline outline-amber-400 max-w-full outline-offset-2 outline-2 rounded-md"}},content:""}),N=function(){var e=P(a().mark((function e(t){var r,n,o,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).set("file",t),e.prev=2,e.next=5,fetch("http://localhost:3000/api/cardImage",{method:"POST",body:r});case 5:if((n=e.sent).ok){e.next=8;break}throw new Error("HTTP error! status: ".concat(n.status));case 8:return e.next=10,n.json();case 10:return o=e.sent,s=o.pinataData,e.abrupt("return",s);case 15:e.prev=15,e.t0=e.catch(2),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=P(a().mark((function e(){var o,s,i,u,d,l,f;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=r,r){e.next=6;break}return e.next=4,c();case 4:o=e.sent,n(o);case 6:if(s=k.getHTML(),!m){e.next=14;break}return e.next=11,N(m);case 11:d=e.sent,i=null===d||void 0===d?void 0:d.IpfsHash,u=null===d||void 0===d?void 0:d.PinSize;case 14:for(f in l={createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),annotation:s,cid:i,mimeType:null===m||void 0===m?void 0:m.type,pinSize:u,resourceId:o,url:t.url,deleted:!1})void 0!==l[f]&&null!==l[f]||delete l[f];w({variables:{input:{content:l}}});case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return j?"Submitting...":C?"Submission error! ".concat(C.message):(0,o.jsxs)("div",{className:"flex flex-col pt-2",children:[(0,o.jsx)("div",{className:"flex justify-end mb-3",children:(0,o.jsx)("button",{className:"hover:bg-gray-300 rounded-xl",title:"Close Modal",onClick:function(){return l(!1)},children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-4 h-4",children:(0,o.jsx)("path",{d:"M12.0007 10.5865L16.9504 5.63672L18.3646 7.05093L13.4149 12.0007L18.3646 16.9504L16.9504 18.3646L12.0007 13.4149L7.05093 18.3646L5.63672 16.9504L10.5865 12.0007L5.63672 7.05093L7.05093 5.63672L12.0007 10.5865Z"})})})}),k&&(0,o.jsx)(T.NM,{editor:k,tippyOptions:{duration:100},children:(0,o.jsx)(V,{editor:k})}),(0,o.jsx)(T.kg,{editor:k,className:"".concat(h?"hidden":"")}),m&&(0,o.jsx)("img",{src:URL.createObjectURL(m),alt:"Pasted Image"}),h?(0,o.jsx)("input",{onPaste:function(e){var t=e.clipboardData;if(t&&t.items.length){var r=t.items[0];if(r.type.startsWith("image/")){var n=r.getAsFile();x(n),document.getElementById("input-image").disabled=!0}else{document.getElementById("paste-image").value=""}}},id:"paste-image",className:"".concat(m&&"hidden"," placeholder:italic placeholder:text-slate-400 block bg-white w-full border border-slate-300 rounded-md py-2 pr-3 shadow-sm focus:outline-none focus:border-sky-500 focus:ring-sky-500 focus:ring-1 sm:text-sm"),placeholder:"Paste image here",type:"text",name:"Paste Image",autoComplete:"off"}):null,(0,o.jsxs)("div",{className:"flex mt-3 justify-between items-center",children:[(0,o.jsx)("input",{type:"file",id:"input-image",onChange:function(e){return x(e.target.files[0])},className:"".concat(h?"":"invisible"," file:py-2 file:px-3 file:inline-flex file:items-center file:gap-x-2 file:text-sm file:font-semibold file:rounded-lg file:border file:border-transparent file:bg-blue-100 file:text-blue-800 file:hover:bg-blue-200 file:disabled:opacity-50 file:disabled:pointer-events-none file:dark:hover:bg-blue-900 file:dark:text-blue-400 file:dark:focus:outline-none file:dark:focus:ring-1 file:dark:focus:ring-gray-600")}),(0,o.jsxs)("div",{className:"flex space-x-3",children:[(0,o.jsx)("button",{onClick:function(){return p(!h)},className:"py-2 px-3 inline-flex items-center gap-x-2 text-sm font-semibold rounded-lg border border-transparent bg-blue-100 text-blue-800 hover:bg-blue-200 disabled:opacity-50 disabled:pointer-events-none dark:hover:bg-blue-900 dark:text-blue-400 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600",title:"Add an image",children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-6 h-6",children:(0,o.jsx)("path",{d:"M2.9918 21C2.44405 21 2 20.5551 2 20.0066V3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082C21.556 3 22 3.44495 22 3.9934V20.0066C22 20.5552 21.5447 21 21.0082 21H2.9918ZM20 15V5H4V19L14 9L20 15ZM20 17.8284L14 11.8284L6.82843 19H20V17.8284ZM8 11C6.89543 11 6 10.1046 6 9C6 7.89543 6.89543 7 8 7C9.10457 7 10 7.89543 10 9C10 10.1046 9.10457 11 8 11Z"})})}),(0,o.jsxs)("button",{title:"Submit Note",onClick:function(){return I()},className:"py-2 px-3 inline-flex items-center gap-x-2 text-sm font-semibold rounded-lg border border-transparent bg-blue-100 text-blue-800 hover:bg-blue-200 disabled:opacity-50 disabled:pointer-events-none dark:hover:bg-blue-900 dark:text-blue-400 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600",children:[j?(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-3 h-3 animate-spin",children:(0,o.jsx)("path",{d:"M11.9995 2C12.5518 2 12.9995 2.44772 12.9995 3V6C12.9995 6.55228 12.5518 7 11.9995 7C11.4472 7 10.9995 6.55228 10.9995 6V3C10.9995 2.44772 11.4472 2 11.9995 2ZM11.9995 17C12.5518 17 12.9995 17.4477 12.9995 18V21C12.9995 21.5523 12.5518 22 11.9995 22C11.4472 22 10.9995 21.5523 10.9995 21V18C10.9995 17.4477 11.4472 17 11.9995 17ZM20.6597 7C20.9359 7.47829 20.772 8.08988 20.2937 8.36602L17.6956 9.86602C17.2173 10.1422 16.6057 9.97829 16.3296 9.5C16.0535 9.02171 16.2173 8.41012 16.6956 8.13398L19.2937 6.63397C19.772 6.35783 20.3836 6.52171 20.6597 7ZM7.66935 14.5C7.94549 14.9783 7.78161 15.5899 7.30332 15.866L4.70525 17.366C4.22695 17.6422 3.61536 17.4783 3.33922 17C3.06308 16.5217 3.22695 15.9101 3.70525 15.634L6.30332 14.134C6.78161 13.8578 7.3932 14.0217 7.66935 14.5ZM20.6597 17C20.3836 17.4783 19.772 17.6422 19.2937 17.366L16.6956 15.866C16.2173 15.5899 16.0535 14.9783 16.3296 14.5C16.6057 14.0217 17.2173 13.8578 17.6956 14.134L20.2937 15.634C20.772 15.9101 20.9359 16.5217 20.6597 17ZM7.66935 9.5C7.3932 9.97829 6.78161 10.1422 6.30332 9.86602L3.70525 8.36602C3.22695 8.08988 3.06308 7.47829 3.33922 7C3.61536 6.52171 4.22695 6.35783 4.70525 6.63397L7.30332 8.13398C7.78161 8.41012 7.94549 9.02171 7.66935 9.5Z"})}):null,"Submit"]})]})]})]})}r(14394);function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function R(e,t,r,n,a,o,s){try{var i=e[o](s),u=i.value}catch(c){return void r(c)}i.done?t(u):Promise.resolve(u).then(n,a)}function D(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function s(e){R(o,n,a,s,i,"next",e)}function i(e){R(o,n,a,s,i,"throw",e)}s(void 0)}))}}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],s=!0,i=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);s=!0);}catch(u){i=!0,a=u}finally{try{s||null==r.return||r.return()}finally{if(i)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return E(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(){var e,t,r=(e=["\n    mutation ADD_NOTE($input: CreateCardInput!) {\n        createCard(input: $input) {\n          document {\n            id\n          }\n        }\n      }"],t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})));return Y=function(){return r},r}function W(e){var t=e.currentTab,r=e.youtubeId,n=e.currentResourceId,c=e.setCurrentResourceId,l=e.loggedIn,f=e.setLoggedIn,h=function(){var e=document.querySelector(".html5-main-video");if(e)return e.currentTime},p=function(){var e=document.querySelector(".html5-main-video"),t=e.currentTime;if(e){var r=document.createElement("canvas");return r.width=e.videoWidth,r.height=e.videoHeight,r.getContext("2d").drawImage(e,0,0,r.width,r.height),{dataUrl:r.toDataURL(),videoTime:t}}console.log("no video found")},g=function(e){for(var t=e.split(","),r=t[0].match(/:(.*?);/)[1],n=atob(t[1]),a=n.length,o=new Uint8Array(a);a--;)o[a]=n.charCodeAt(a);return new Blob([o],{type:r})},m=(0,s.useState)(!1),x=m[0],b=m[1],v=(0,s.useState)(!1),w=v[0],y=v[1],j=t.id,C=(0,s.useState)(""),k=C[0],N=C[1],I=(0,s.useState)(""),T=I[0],M=I[1],V=(0,s.useState)(!1),A=V[0],O=(V[1],(0,i.c)().composeClient),P=r,Z=(0,s.useState)([{start:"0.42",dur:"7.26",text:"In 2023 Kurzgesagt has existed for 10 years,\xa0\ninsanely long in internet years. We are among the\xa0\xa0"},{start:"7.68",dur:"4.86",text:"largest sciency channels on Youtube and still a\xa0\nbit of a black box to people. So let us talk about\xa0\xa0"},{start:"12.54",dur:"6.84",text:"ourselves a bit in three parts: Our backstory, how\xa0\nwe finance our work and the values of Kurzgesagt!"},{start:"19.38",dur:"2.88",text:"Let\u2019s jump to a more innocent time."},{start:"22.26",dur:"2.76",text:"From humble beginnings to Today"},{start:"25.02",dur:"6.12",text:"Kurzgesagt\u2019s foundation was laid when Philipp, our\xa0\nfounder, dropped out of high school as a teenager.\xa0\xa0"},{start:"31.68",dur:"6.3",text:"Learning seemed daft and useless and he was not\xa0\ninterested in anything. Until a very special\xa0\xa0"},{start:"37.98",dur:"4.98",text:"teacher at a school for dropouts grabbed him\xa0\nby the neck. The way she taught was different.\xa0\xa0"},{start:"43.62",dur:"5.4",text:"She talked about connections and the big picture.\xa0\nShe told a story. For the first time ever,\xa0\xa0"},{start:"49.02",dur:"4.56",text:"Philipp wanted to learn more without being\xa0\nforced. It was a key life experience."},{start:"53.58",dur:"4.92",text:"Kurzgesagt tries to recreate this\xa0\nexperience for you. Nothing is\xa0\xa0"},{start:"58.5",dur:"3.24",text:"boring if you tell a good story\xa0\nand we try to tell these stories,\xa0\xa0"},{start:"61.74",dur:"3.42",text:"to spark excitement and make you\xa0\nwant to go on and learn more."},{start:"65.16",dur:"3.96",text:"Because of the one teacher that could do\xa0\nthis, Philipp got a high school degree,\xa0\xa0"},{start:"69.12",dur:"4.38",text:"studied history and design and eventually\xa0\nstarted Kurzgesagt as a passion project,\xa0\xa0"},{start:"73.5",dur:"2.28",text:"inspired by Crash Course World history."},{start:"75.78",dur:"6.06",text:"In 2012 Youtube was less commercial and more\xa0\nidealistic. You couldn\u2019t make a living with\xa0\xa0"},{start:"81.84",dur:"5.52",text:"videos as involved as ours and that was fine.\xa0\nThe goal was creative freedom and so for the\xa0\xa0"},{start:"87.36",dur:"4.8",text:"first few years, it actually cost money to\xa0\nmake Kurzgesagt. We had no outside funding,\xa0\xa0"},{start:"92.16",dur:"5.46",text:"just intrinsic motivation and a few friends from\xa0\nuniversity. We worked for clients during the day\xa0\xa0"},{start:"97.62",dur:"7.2",text:"and on Kurzgesagt at night, 80-100 hours a week.\xa0\nIt was a real struggle but also very rewarding."},{start:"105.42",dur:"4.68",text:"But then Patreon launched, sponsorships\xa0\nstarted, our views increased, Youtube\xa0\xa0"},{start:"110.1",dur:"5.04",text:"changed. In 2015 the channel began to\xa0\nbreak even and then to earn a profit.\xa0\xa0"},{start:"115.86",dur:"3.9",text:"But we were pretty burned out at this\xa0\npoint, so we decided to bring in more\xa0\xa0"},{start:"119.76",dur:"4.2",text:"friends and hire the first team members\xa0\nfull time, creating a legal entity."},{start:"123.96",dur:"6.66",text:"More people meant that we could stop overworking,\xa0\ndo more and improve. But we also needed to earn\xa0\xa0"},{start:"130.62",dur:"5.4",text:"more; the livelihood of real humans depended\xa0\nupon it. None of us had any experience in\xa0\xa0"},{start:"136.02",dur:"4.62",text:"running a company. We didn\u2019t plan to become\xa0\nbig or to grow \u2013 it sorta just happened."},{start:"140.64",dur:"4.26",text:"A decade later Kurzgesagt is\xa0\nnot a small project anymore.\xa0"},{start:"145.62",dur:"5.34",text:"We are an animation studio, with offices\xa0\nin Munich and Berlin. We need computers,\xa0\xa0"},{start:"150.96",dur:"6.42",text:"monitors, tablets, desks, coffee, contracts,\xa0\npay licences, taxes, rent and insurance."},{start:"158.46",dur:"6.06",text:"In 2023 our team consists of over 60 full\xa0\nemployees and a lot of freelancers around\xa0\xa0"},{start:"164.52",dur:"5.28",text:"the world. Salaries alone cost millions\xa0\nof dollars a year, just to stay around."},{start:"169.8",dur:"5.16",text:"This creates an interesting problem:\xa0\nwith such high production costs,\xa0"},{start:"174.96",dur:"2.4",text:"how can we publish our work for free?"},{start:"178.44",dur:"1.92",text:"How we finance Kurzgesagt"},{start:"180.36",dur:"7.2",text:"We have added up our earnings from 2015 through\xa0\n2022. Our sources of funding change depending on\xa0\xa0"},{start:"187.56",dur:"5.04",text:"opportunities and the state of the world. Early\xa0\non, agency work was our main source of income,\xa0\xa0"},{start:"192.6",dur:"5.58",text:"ad revenue varies, in some years we got\xa0\nmore sponsorships than in others. The shop\xa0\xa0"},{start:"198.18",dur:"4.08",text:"didn\u2019t exist for a long time, then it became\xa0\npretty big after we launched our calendar."},{start:"203.04",dur:"4.56",text:"62% of our revenue comes\xa0\nindirectly or directly from you:\xa0\xa0"},{start:"207.6",dur:"4.86",text:"You watch our videos with ads, support\xa0\nus on Patreon or buy from our shop."},{start:"213.3",dur:"6.42",text:"The single biggest source of income by far, is\xa0\nour shop that alone accounted for 40% over the\xa0\xa0"},{start:"219.72",dur:"5.64",text:"last 8 years. The shop started small but once we\xa0\npublished our calendar for the first time in 2016,\xa0\xa0"},{start:"225.36",dur:"4.62",text:"we realised it could really help us do more\xa0\nthings and we started producing more and\xa0\xa0"},{start:"229.98",dur:"4.92",text:"more science products, from our posters to our\xa0\ngratitude journal or universe scented candles.\xa0\xa0"},{start:"235.5",dur:"7.68",text:"YouTube ads accounted for 13% and Patreon 9%.\xa0\nSo without your support we would cease to exist."},{start:"244.08",dur:"5.1",text:"Our shop and Patreon are our most important\xa0\nsources of revenue, and because we see ourselves\xa0\xa0"},{start:"249.18",dur:"4.92",text:"as science communicators \u2013 we don\u2019t just do\xa0\nmerch, but sciency products that we spend\xa0\xa0"},{start:"254.1",dur:"4.8",text:"hundreds of hours researching, discussing with\xa0\nexperts, polishing up and working on directly\xa0\xa0"},{start:"258.9",dur:"6.6",text:"with the manufacturers. They are part of the\xa0\nscience story we try to tell. It also just feels\xa0\xa0"},{start:"265.5",dur:"4.68",text:"good to get directly funded by you guys and give\xa0\nyou something back for it, on top of our videos.\xa0\xa0"},{start:"270.18",dur:"5.1",text:"YouTube ads are a crucial part of our funding\xa0\nas well, but they are not within our control."},{start:"276.12",dur:"5.58",text:"Then there is paid agency work, which we\xa0\nstopped doing in 2022 \u2013 it accounted for\xa0\xa0"},{start:"281.7",dur:"5.28",text:"9% of our revenue over the last 8 years. A\xa0\nlot in the beginning, not much by the end."},{start:"286.98",dur:"5.1",text:"Then there are commercial sponsors\xa0\nadvertising products -they accounted\xa0\xa0"},{start:"292.08",dur:"4.38",text:"for 12% of our revenue. We also\xa0\ngot about 7% from German Public\xa0\xa0"},{start:"296.46",dur:"4.08",text:"Broadcasting for the German Channel,\xa0\nbut ended this partnership in 2022."},{start:"301.38",dur:"5.16",text:"Finally there are institutional sponsors\xa0\nrepresenting about 10%. Some people take\xa0\xa0"},{start:"306.54",dur:"4.44",text:"issue with this \u2013 especially Bill Gates has come\xa0\nunder public scrutiny, and we\u2019ve been criticised\xa0\xa0"},{start:"310.98",dur:"5.46",text:"for even working with organisations funded by\xa0\nhim. So let us look at this 10% in more detail:"},{start:"317.1",dur:"3.84",text:"About 3% of our revenue over the\xa0\nlast eight years came from the Gates\xa0\xa0"},{start:"320.94",dur:"3.96",text:"organisations for a wide variety\xa0\nof topics, often suggested by us."},{start:"325.74",dur:"6.06",text:"5% comes from Open Philanthropy and is only\xa0\nused for specific projects. With these funds,\xa0\xa0"},{start:"331.8",dur:"5.88",text:"we have started Arabic, Hindi, Korean, Japanese,\xa0\nPortuguese, and French channels, bringing more\xa0\xa0"},{start:"337.68",dur:"5.64",text:"free science content to more people. Then there is\xa0\na two-year funding for original Tik Tok content,\xa0\xa0"},{start:"343.32",dur:"4.26",text:"which gives us freedom to explore and learn\xa0\nhow to do short form science communication."},{start:"348.3",dur:"5.52",text:"The final 2% came from other organisations\xa0\nlike the red cross or the UN for example."},{start:"354.54",dur:"3.84",text:"We choose institutional sponsors\xa0\ncarefully but if organisations\xa0\xa0"},{start:"358.38",dur:"3.72",text:"want to fund videos that help us spread\xa0\nquality information about relevant topics,\xa0\xa0"},{start:"362.1",dur:"5.1",text:"this is an easy yes for us, if we have\xa0\nthe capacity for it. On top of that,\xa0\xa0"},{start:"367.2",dur:"3.72",text:"the institutional sponsors we are\xa0\nworking with align with our values."},{start:"371.52",dur:"5.22",text:"We have contracts with every grant giver or\xa0\nsponsor that bars them from editorial influence,\xa0\xa0"},{start:"376.74",dur:"3.96",text:"other than suggesting topic areas like\xa0\n\u201cglobal health\u201d or \u201cclimate change\u201d.\xa0\xa0"},{start:"381.42",dur:"4.8",text:"We agree on video topics together, but\xa0\nsponsors can neither influence details, nor\xa0\xa0"},{start:"386.22",dur:"6.48",text:"our conclusions. The final decision always remains\xa0\nwith us. And usually, we develop the topics of the\xa0\xa0"},{start:"392.7",dur:"4.44",text:"videos autonomously and tell the sponsor what\xa0\nwe are doing afterwards. If you are interested\xa0\xa0"},{start:"397.14",dur:"4.44",text:"in how we research our videos in detail, our\xa0\nhead of research wrote an article about it."},{start:"401.58",dur:"6",text:"Running an educational youtube channel is a\xa0\nbalancing act that we take very seriously. We\xa0\xa0"},{start:"407.58",dur:"5.82",text:"are doing our best to maintain this balance,\xa0\nadjusting whenever necessary. As a team and\xa0\xa0"},{start:"413.4",dur:"4.56",text:"company we want to grow to give more people\xa0\naccess to a science based outlook on the world."},{start:"417.96",dur:"5.2",text:"This brings us to our final topic\xa0\n\u2013 why are we doing Kurzgesagt?"},{start:"423.72",dur:"2.04",text:"Our Values and Our Vision"},{start:"427.02",dur:"5.64",text:"Our core mission is to spark curiosity. We\xa0\nwant to make science and humanism accessible\xa0\xa0"},{start:"432.66",dur:"5.1",text:"for as many people as possible. The effort\xa0\nwe put into creating our videos is a way of\xa0\xa0"},{start:"437.76",dur:"5.28",text:"achieving that \u2013 our videos are beautiful\xa0\nbecause that helps to spark curiosity,\xa0\xa0"},{start:"443.04",dur:"4.44",text:"to understand complex topics, and because\xa0\nit just feels good to create and watch."},{start:"448.26",dur:"4.86",text:"Our research is as intensive as it is\xa0\nso our videos are a good simplification\xa0\xa0"},{start:"453.12",dur:"5.04",text:"of very complicated topics. We want\xa0\nto make people excited about science\xa0\xa0"},{start:"458.16",dur:"4.8",text:"so they rediscover subjects they hated\xa0\nin school and see how amazing they are."},{start:"462.96",dur:"6.18",text:"On top of curiosity, we want to inspire long term\xa0\nthinking and a positive, constructive outlook.\xa0\xa0"},{start:"469.98",dur:"5.88",text:"Being optimistic about the future of humanity\xa0\nis not mainstream and we think this is horrible.\xa0\xa0"},{start:"475.86",dur:"4.86",text:"Pessimism often sounds smart and\xa0\ngets more views while optimism can\xa0\xa0"},{start:"480.72",dur:"3.66",text:"sound naive but this is a bias that\xa0\nis not helpful for us as a species.\xa0\xa0"},{start:"485.28",dur:"4.74",text:"So despite the gloominess of many topics,\xa0\nwe want to approach them with informed and\xa0\xa0"},{start:"490.02",dur:"4.56",text:"well researched optimism \u2013 not brushing\xa0\nhumanity's very real challenges aside,\xa0\xa0"},{start:"494.58",dur:"5.58",text:"but also not falling into the trap of pessimism.\xa0\nWe want to inspire you to dream a little about\xa0\xa0"},{start:"500.16",dur:"5.04",text:"the glorious future that we could actually\xa0\nbuild \u2013 but only if we believe it is possible."},{start:"505.2",dur:"6.6",text:"In the long run we don\u2019t only want to do this\xa0\non Youtube. The idea is for Kurzgesagt to be a\xa0\xa0"},{start:"511.8",dur:"5.04",text:"positive influence across more media. On our\xa0\nTik Tok channel, in the long form content we\xa0\xa0"},{start:"516.84",dur:"5.16",text:"are exploring, in apps, in the VR game that will\xa0\nbe released later this year and the games we plan\xa0\xa0"},{start:"522",dur:"6",text:"to make in the future. Our shop is a central part\xa0\nof this vision: we start our stories with a video\xa0\xa0"},{start:"528",dur:"1.98",text:"and end them with a pos\nter."},{start:"529.98",dur:"5.94",text:"There are so many things we want to do. And\xa0\nthanks to you watching this right now, we have\xa0\xa0"},{start:"535.92",dur:"4.98",text:"the freedom to work to the best of our knowledge\xa0\nand ability. In the end, we hope you like what\xa0\xa0"},{start:"540.9",dur:"5.4",text:"we offer and that we will be doing something\xa0\nworthwhile for as long as we exist. And hopefully,\xa0\xa0"},{start:"546.3",dur:"6",text:"we\u2019ll have a lasting impact by making science and\xa0\nlearning more fun for as many people as possible."},{start:"553.02",dur:"5.1",text:"If you personally want to help us do this, you can\xa0\nwatch and share our videos, check out our shop,\xa0\xa0"},{start:"558.12",dur:"5.52",text:"become a patreon or give us an ad blocker\xa0\nexception. We exist because of you and\xa0\xa0"},{start:"563.64",dur:"5.4",text:"you have no idea how much we appreciate that\xa0\nyou are here. And hopefully we are less of a\xa0\xa0"},{start:"569.04",dur:"6.06",text:"black box now. In any case. Doing Kurzgesagt\xa0\nfor a decade has been a pretty crazy ride.\xa0\xa0"},{start:"576",dur:"5.04",text:"So from the whole team \u2013 Thank you so\xa0\nmuch for being with us all these years."}]),z=Z[0],E=(Z[1],function(){var e=D(a().mark((function e(t){var r=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.length>1&&void 0!==r[1]?r[1]:"en",console.log("video");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),R=function(e){var t=setInterval(D(a().mark((function t(){var r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,chrome.scripting.executeScript({target:{tabId:e},func:h});case 2:r=t.sent,M(r[0].result);case 4:case"end":return t.stop()}}),t)}))),1e3);N(t)},W=function(){var e=D(a().mark((function e(){var r,n,o,s,i,u,c,d,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.id,-1!==t.url.indexOf("youtube.com/watch?v=")){e.next=4;break}return console.log("Not a youtube video"),e.abrupt("return");case 4:return e.prev=4,e.next=7,chrome.scripting.executeScript({target:{tabId:r},func:p});case 7:return n=e.sent,o=n[0].result.dataUrl,s=n[0].result.videoTime,i=g(o),u=new FormData,c=new File([i],"image.jpg",{type:"image/jpeg"}),u.set("canvasFile",c,"screenshot.jpg"),e.next=16,fetch("http://localhost:3000/api/uploadCanvasImage",{method:"POST",body:u});case 16:if((d=e.sent).ok){e.next=19;break}throw new Error("Server responded with an error: "+d.status);case 19:return e.next=21,d.json();case 21:return l=e.sent,e.abrupt("return",{videoTime:s,cid:l.rootCid});case 25:e.prev=25,e.t0=e.catch(4),console.error(e.t0);case 28:case"end":return e.stop()}}),e,null,[[4,25]])})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=D(a().mark((function e(){var r,n,o,s,i,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W();case 2:return r=e.sent,n=r.cid,o=O.id,s=(new Date).toISOString(),e.next=8,fetch("http://localhost:3000/api/createNewYoutubeResource",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clientMutationId:o,url:t.url,title:t.title,createdAt:s,updatedAt:s,cid:n})});case 8:if((i=e.sent).ok){e.next=11;break}throw new Error("Server responded with an error: "+i.status);case 11:return e.next=13,i.json();case 13:return u=e.sent,e.abrupt("return",u.newResourceId.data.createIcarusResource.document.id);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=(0,u.Ps)(Y()),$=_((0,d.D)(q,{}),2),K=$[0],F=$[1],G=(F.data,F.loading),X=F.error,J=function(){var e=D(a().mark((function e(){var t,r,o,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n,n){e.next=6;break}return e.next=4,U();case 4:t=e.sent,c(t);case 6:return e.next=8,W();case 8:r=e.sent,o=r.videoTime,s=r.cid,K({variables:{input:{content:{createdAt:date,updatedAt:date,resourceId:t,cid:s,videoTime:o}}}});case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){E(P,"en"),R(j)}),[]),G?"Submitting...":X?"Submission error! ".concat(X.message):(0,o.jsxs)("div",{id:"subtitle-container",children:[(0,o.jsx)("div",{id:"youtube-panel-menu",className:"flex justify-center my-5",children:(0,o.jsxs)("div",{className:"fixed top-0",children:[(0,o.jsx)("button",{type:"button",title:"Change Panel",onClick:function(){return x?R(j):clearInterval(k),void b(!x)},className:"py-3 px-4 inline-flex items-center gap-x-2 -ms-px first:rounded-s-lg first:ms-0 last:rounded-e-lg text-sm font-medium focus:z-10 border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-slate-900 dark:border-gray-700 dark:text-white dark:hover:bg-gray-800 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600",children:x?(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-3 h-3",children:(0,o.jsx)("path",{d:"M21 3C21.5523 3 22 3.44772 22 4V20C22 20.5523 21.5523 21 21 21H3C2.44772 21 2 20.5523 2 20V4C2 3.44772 2.44772 3 3 3H21ZM20 5H4V19H20V5ZM9 8C10.1045 8 11.1049 8.44841 11.829 9.173L10.4153 10.5866C10.0534 10.2241 9.55299 10 9 10C7.895 10 7 10.895 7 12C7 13.105 7.895 14 9 14C9.5525 14 10.0525 13.7762 10.4144 13.4144L11.828 14.828C11.104 15.552 10.104 16 9 16C6.792 16 5 14.208 5 12C5 9.792 6.792 8 9 8ZM16 8C17.1045 8 18.1049 8.44841 18.829 9.173L17.4153 10.5866C17.0534 10.2241 16.553 10 16 10C14.895 10 14 10.895 14 12C14 13.105 14.895 14 16 14C16.5525 14 17.0525 13.7762 17.4144 13.4144L18.828 14.828C18.104 15.552 17.104 16 16 16C13.792 16 12 14.208 12 12C12 9.792 13.792 8 16 8Z"})}):(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-3 h-3",children:(0,o.jsx)("path",{d:"M20.0049 2C21.1068 2 22 2.89821 22 3.9908V20.0092C22 21.1087 21.1074 22 20.0049 22H4V18H2V16H4V13H2V11H4V8H2V6H4V2H20.0049ZM8 4H6V20H8V4ZM20 4H10V20H20V4Z"})})}),(0,o.jsx)("button",{type:"button",title:"Add Note",onClick:function(){return y(!w)},className:"py-3 px-4 inline-flex items-center gap-x-2 -ms-px first:rounded-s-lg first:ms-0 last:rounded-e-lg text-sm font-medium focus:z-10 border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-slate-900 dark:border-gray-700 dark:text-white dark:hover:bg-gray-800 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600",children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-3 h-3",children:(0,o.jsx)("path",{d:"M15 4H5V20H19V8H15V4ZM3 2.9918C3 2.44405 3.44749 2 3.9985 2H16L20.9997 7L21 20.9925C21 21.5489 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5447 3 21.0082V2.9918ZM11 11V8H13V11H16V13H13V16H11V13H8V11H11Z"})})}),(0,o.jsx)("button",{type:"button",title:"Youtube Screenshot",onClick:function(){return J()},className:"py-3 px-4 inline-flex items-center gap-x-2 -ms-px first:rounded-s-lg first:ms-0 last:rounded-e-lg text-sm font-medium focus:z-10 border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-slate-900 dark:border-gray-700 dark:text-white dark:hover:bg-gray-800 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600",children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-3 h-3",children:(0,o.jsx)("path",{d:"M9.82843 5L7.82843 7H4V19H20V7H16.1716L14.1716 5H9.82843ZM9 3H15L17 5H21C21.5523 5 22 5.44772 22 6V20C22 20.5523 21.5523 21 21 21H3C2.44772 21 2 20.5523 2 20V6C2 5.44772 2.44772 5 3 5H7L9 3ZM12 18C8.96243 18 6.5 15.5376 6.5 12.5C6.5 9.46243 8.96243 7 12 7C15.0376 7 17.5 9.46243 17.5 12.5C17.5 15.5376 15.0376 18 12 18ZM12 16C13.933 16 15.5 14.433 15.5 12.5C15.5 10.567 13.933 9 12 9C10.067 9 8.5 10.567 8.5 12.5C8.5 14.433 10.067 16 12 16Z"})})}),(0,o.jsx)("button",{type:"button",title:"Refresh",onClick:function(){window.location.reload()},className:"py-3 px-4 inline-flex items-center gap-x-2 -ms-px first:rounded-s-lg first:ms-0 last:rounded-e-lg text-sm font-medium focus:z-10 border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-slate-900 dark:border-gray-700 dark:text-white dark:hover:bg-gray-800 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600",children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-3 h-3",children:(0,o.jsx)("path",{d:"M5.46257 4.43262C7.21556 2.91688 9.5007 2 12 2C17.5228 2 22 6.47715 22 12C22 14.1361 21.3302 16.1158 20.1892 17.7406L17 12H20C20 7.58172 16.4183 4 12 4C9.84982 4 7.89777 4.84827 6.46023 6.22842L5.46257 4.43262ZM18.5374 19.5674C16.7844 21.0831 14.4993 22 12 22C6.47715 22 2 17.5228 2 12C2 9.86386 2.66979 7.88416 3.8108 6.25944L7 12H4C4 16.4183 7.58172 20 12 20C14.1502 20 16.1022 19.1517 17.5398 17.7716L18.5374 19.5674Z"})})}),(0,o.jsx)("button",{type:"button",title:"Profile Page",onClick:function(){return f(!l)},className:"py-3 px-4 inline-flex items-center gap-x-2 -ms-px first:rounded-s-lg first:ms-0 last:rounded-e-lg text-sm font-medium focus:z-10 border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-slate-900 dark:border-gray-700 dark:text-white dark:hover:bg-gray-800 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600",children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-3 h-3",children:(0,o.jsx)("path",{d:"M4 22C4 17.5817 7.58172 14 12 14C16.4183 14 20 17.5817 20 22H18C18 18.6863 15.3137 16 12 16C8.68629 16 6 18.6863 6 22H4ZM12 13C8.685 13 6 10.315 6 7C6 3.685 8.685 1 12 1C15.315 1 18 3.685 18 7C18 10.315 15.315 13 12 13ZM12 11C14.21 11 16 9.21 16 7C16 4.79 14.21 3 12 3C9.79 3 8 4.79 8 7C8 9.21 9.79 11 12 11Z"})})})]})}),w?(0,o.jsx)("div",{className:"border-2 rounded fixed p-6 w-full bg-gray-100",children:(0,o.jsx)(B,{currentTab:t,youtubeId:r,currentResourceId:n,setCurrentResourceId:c,createNewYoutubeResource:U,setYoutubeOpenAddNote:y})}):null,(0,o.jsx)("div",{id:"youtube-panel-content",children:x?(0,o.jsx)(H,{currentTab:t}):A?(0,o.jsxs)("div",{children:[(0,o.jsx)(L,{}),(0,o.jsx)(L,{}),(0,o.jsx)(L,{}),(0,o.jsx)(L,{}),(0,o.jsx)(L,{}),(0,o.jsx)(L,{})]}):(0,o.jsx)(S,{subtitles:z,currentTabId:t.id,currentTime:T})})]})}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function q(e,t,r,n,a,o,s){try{var i=e[o](s),u=i.value}catch(c){return void r(c)}i.done?t(u):Promise.resolve(u).then(n,a)}function $(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function s(e){q(o,n,a,s,i,"next",e)}function i(e){q(o,n,a,s,i,"throw",e)}s(void 0)}))}}function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],s=!0,i=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);s=!0);}catch(u){i=!0,a=u}finally{try{s||null==r.return||r.return()}finally{if(i)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return U(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return U(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(){var e,t,r=(e=["\n    mutation ADD_NOTE($input: CreateCardInput!) {\n        createCard(input: $input) {\n          document {\n            id\n          }\n        }\n      }"],t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})));return F=function(){return r},r}function G(e){var t=e.currentResourceId,r=e.setCurrentResourceId,n=e.currentTab,c=e.setOpenAddNote,l=function(){return{scrollY:window.scrollY}},f=(0,i.c)().composeClient,h=n.id,p=(0,s.useState)(!1),g=p[0],m=p[1],x=(0,s.useState)(null),b=x[0],v=x[1],w=f.id,y=(0,u.Ps)(F()),j=K((0,d.D)(y,{onCompleted:function(){return c(!1)}}),2),C=j[0],k=j[1],N=(k.data,k.loading),I=k.error,L=function(){var e=$(a().mark((function e(){var t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,chrome.scripting.executeScript({target:{tabId:h},func:l});case 2:return t=e.sent,(r=t[0].result).scrollY=parseInt(r.scrollY),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=$(a().mark((function e(){var t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:3000/api/createNewResource",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clientMutationId:w,url:n.url,title:n.title,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()})});case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Server responded with an error: "+t.status);case 5:return e.next=7,t.json();case 7:return r=e.sent,e.abrupt("return",r.newResourceId);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=$(a().mark((function e(t){var r,n,o,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).set("file",t),e.prev=2,e.next=5,fetch("http://localhost:3000/api/cardImage",{method:"POST",body:r});case 5:if((n=e.sent).ok){e.next=8;break}throw new Error("HTTP error! status: ".concat(n.status));case 8:return e.next=10,n.json();case 10:return o=e.sent,s=o.pinataData,e.abrupt("return",s);case 15:e.prev=15,e.t0=e.catch(2),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t){return e.apply(this,arguments)}}(),A=(0,T.jE)({extensions:[M.Z],editorProps:{attributes:{class:"prose prose-md lg:prose-lg dark:prose-invert outline outline-amber-400 max-w-full outline-offset-2 outline-2 rounded-md"}},content:""}),O=function(){var e=$(a().mark((function e(){var o,s,i,u,d,l,f,h,p;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t,t){e.next=8;break}return e.next=4,S();case 4:if(o=e.sent){e.next=7;break}throw new Error("Error creating new resource");case 7:r(o);case 8:return e.next=10,L();case 10:if(s=e.sent,i=s.scrollY,u=A.getHTML(),!b){e.next=20;break}return e.next=17,H(b);case 17:f=e.sent,d=null===f||void 0===f?void 0:f.IpfsHash,l=null===f||void 0===f?void 0:f.PinSize;case 20:for(p in h={createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),annotation:u,cid:d,mimeType:null===b||void 0===b?void 0:b.type,pageYOffset:i,pinSize:l,resourceId:o,url:n.url,deleted:!1})void 0!==h[p]&&null!==h[p]||delete h[p];C({variables:{input:{content:h}}}),c(!1);case 24:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return I?"Submission error! ".concat(I.message):(0,o.jsxs)("div",{className:"flex flex-col pt-2",children:[(0,o.jsx)("div",{className:"flex justify-end mb-3",children:(0,o.jsx)("button",{className:"hover:bg-gray-300 rounded-xl",title:"Close Modal",onClick:function(){return c(!1)},children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-4 h-4",children:(0,o.jsx)("path",{d:"M12.0007 10.5865L16.9504 5.63672L18.3646 7.05093L13.4149 12.0007L18.3646 16.9504L16.9504 18.3646L12.0007 13.4149L7.05093 18.3646L5.63672 16.9504L10.5865 12.0007L5.63672 7.05093L7.05093 5.63672L12.0007 10.5865Z"})})})}),A&&(0,o.jsx)(T.NM,{editor:A,tippyOptions:{duration:100},children:(0,o.jsx)(V,{editor:A})}),(0,o.jsx)(T.kg,{editor:A,className:"".concat(g?"hidden":"")}),b&&(0,o.jsx)("img",{src:URL.createObjectURL(b),alt:"Pasted Image"}),g?(0,o.jsx)("input",{onPaste:function(e){var t=e.clipboardData;if(t&&t.items.length){var r=t.items[0];if(r.type.startsWith("image/")){var n=r.getAsFile();v(n),document.getElementById("input-image").disabled=!0}else{document.getElementById("paste-image").value=""}}},id:"paste-image",className:"".concat(b&&"hidden"," placeholder:italic placeholder:text-slate-400 block bg-white w-full border border-slate-300 rounded-md py-2 pr-3 shadow-sm focus:outline-none focus:border-sky-500 focus:ring-sky-500 focus:ring-1 sm:text-sm"),placeholder:"Paste image here",type:"text",name:"Paste Image",autoComplete:"off"}):null,(0,o.jsxs)("div",{className:"flex mt-3 justify-between items-center",children:[(0,o.jsx)("input",{type:"file",id:"input-image",onChange:function(e){return v(e.target.files[0])},className:"".concat(g?"":"invisible"," file:py-2 file:px-3 file:inline-flex file:items-center file:gap-x-2 file:text-sm file:font-semibold file:rounded-lg file:border file:border-transparent file:bg-blue-100 file:text-blue-800 file:hover:bg-blue-200 file:disabled:opacity-50 file:disabled:pointer-events-none file:dark:hover:bg-blue-900 file:dark:text-blue-400 file:dark:focus:outline-none file:dark:focus:ring-1 file:dark:focus:ring-gray-600")}),(0,o.jsxs)("div",{className:"flex space-x-3",children:[(0,o.jsx)("button",{onClick:function(){return m(!g)},className:"py-2 px-3 inline-flex items-center gap-x-2 text-sm font-semibold rounded-lg border border-transparent bg-blue-100 text-blue-800 hover:bg-blue-200 disabled:opacity-50 disabled:pointer-events-none dark:hover:bg-blue-900 dark:text-blue-400 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600",title:"Add an image",children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-6 h-6",children:(0,o.jsx)("path",{d:"M2.9918 21C2.44405 21 2 20.5551 2 20.0066V3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082C21.556 3 22 3.44495 22 3.9934V20.0066C22 20.5552 21.5447 21 21.0082 21H2.9918ZM20 15V5H4V19L14 9L20 15ZM20 17.8284L14 11.8284L6.82843 19H20V17.8284ZM8 11C6.89543 11 6 10.1046 6 9C6 7.89543 6.89543 7 8 7C9.10457 7 10 7.89543 10 9C10 10.1046 9.10457 11 8 11Z"})})}),(0,o.jsxs)("button",{title:"Submit Note",onClick:function(){return O()},className:"py-2 px-3 inline-flex items-center gap-x-2 text-sm font-semibold rounded-lg border border-transparent bg-blue-100 text-blue-800 hover:bg-blue-200 disabled:opacity-50 disabled:pointer-events-none dark:hover:bg-blue-900 dark:text-blue-400 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600",children:[N?(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-3 h-3 animate-spin",children:(0,o.jsx)("path",{d:"M11.9995 2C12.5518 2 12.9995 2.44772 12.9995 3V6C12.9995 6.55228 12.5518 7 11.9995 7C11.4472 7 10.9995 6.55228 10.9995 6V3C10.9995 2.44772 11.4472 2 11.9995 2ZM11.9995 17C12.5518 17 12.9995 17.4477 12.9995 18V21C12.9995 21.5523 12.5518 22 11.9995 22C11.4472 22 10.9995 21.5523 10.9995 21V18C10.9995 17.4477 11.4472 17 11.9995 17ZM20.6597 7C20.9359 7.47829 20.772 8.08988 20.2937 8.36602L17.6956 9.86602C17.2173 10.1422 16.6057 9.97829 16.3296 9.5C16.0535 9.02171 16.2173 8.41012 16.6956 8.13398L19.2937 6.63397C19.772 6.35783 20.3836 6.52171 20.6597 7ZM7.66935 14.5C7.94549 14.9783 7.78161 15.5899 7.30332 15.866L4.70525 17.366C4.22695 17.6422 3.61536 17.4783 3.33922 17C3.06308 16.5217 3.22695 15.9101 3.70525 15.634L6.30332 14.134C6.78161 13.8578 7.3932 14.0217 7.66935 14.5ZM20.6597 17C20.3836 17.4783 19.772 17.6422 19.2937 17.366L16.6956 15.866C16.2173 15.5899 16.0535 14.9783 16.3296 14.5C16.6057 14.0217 17.2173 13.8578 17.6956 14.134L20.2937 15.634C20.772 15.9101 20.9359 16.5217 20.6597 17ZM7.66935 9.5C7.3932 9.97829 6.78161 10.1422 6.30332 9.86602L3.70525 8.36602C3.22695 8.08988 3.06308 7.47829 3.33922 7C3.61536 6.52171 4.22695 6.35783 4.70525 6.63397L7.30332 8.13398C7.78161 8.41012 7.94549 9.02171 7.66935 9.5Z"})}):null,"Submit"]})]})]})]})}function X(e){var t=e.currentTab,r=e.setCurrentResourceId,n=e.currentResourceId,a=e.setLoggedIn,i=e.loggedIn,u=(0,s.useState)(!1),c=u[0],d=u[1];return(0,o.jsxs)("div",{className:"w-full",children:[(0,o.jsx)("div",{id:"article-panel-menu",className:"flex justify-center my-5",children:(0,o.jsxs)("div",{className:"fixed top-0 z-20",children:[(0,o.jsx)("button",{type:"button",title:"Add Note",onClick:function(){return d(!c)},className:"py-3 px-4 inline-flex items-center gap-x-2 -ms-px first:rounded-s-lg first:ms-0 last:rounded-e-lg text-sm font-medium focus:z-10 border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-slate-900 dark:border-gray-700 dark:text-white dark:hover:bg-gray-800 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600",children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-3 h-3",children:(0,o.jsx)("path",{d:"M15 4H5V20H19V8H15V4ZM3 2.9918C3 2.44405 3.44749 2 3.9985 2H16L20.9997 7L21 20.9925C21 21.5489 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5447 3 21.0082V2.9918ZM11 11V8H13V11H16V13H13V16H11V13H8V11H11Z"})})}),(0,o.jsx)("button",{type:"button",title:"Refresh",onClick:function(){window.location.reload()},className:"py-3 px-4 inline-flex items-center gap-x-2 -ms-px first:rounded-s-lg first:ms-0 last:rounded-e-lg text-sm font-medium focus:z-10 border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-slate-900 dark:border-gray-700 dark:text-white dark:hover:bg-gray-800 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600",children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-3 h-3",children:(0,o.jsx)("path",{d:"M5.46257 4.43262C7.21556 2.91688 9.5007 2 12 2C17.5228 2 22 6.47715 22 12C22 14.1361 21.3302 16.1158 20.1892 17.7406L17 12H20C20 7.58172 16.4183 4 12 4C9.84982 4 7.89777 4.84827 6.46023 6.22842L5.46257 4.43262ZM18.5374 19.5674C16.7844 21.0831 14.4993 22 12 22C6.47715 22 2 17.5228 2 12C2 9.86386 2.66979 7.88416 3.8108 6.25944L7 12H4C4 16.4183 7.58172 20 12 20C14.1502 20 16.1022 19.1517 17.5398 17.7716L18.5374 19.5674Z"})})}),(0,o.jsx)("button",{type:"button",title:"Profile Page",onClick:function(){return a(!i)},className:"py-3 px-4 inline-flex items-center gap-x-2 -ms-px first:rounded-s-lg first:ms-0 last:rounded-e-lg text-sm font-medium focus:z-10 border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-slate-900 dark:border-gray-700 dark:text-white dark:hover:bg-gray-800 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600",children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-3 h-3",children:(0,o.jsx)("path",{d:"M4 22C4 17.5817 7.58172 14 12 14C16.4183 14 20 17.5817 20 22H18C18 18.6863 15.3137 16 12 16C8.68629 16 6 18.6863 6 22H4ZM12 13C8.685 13 6 10.315 6 7C6 3.685 8.685 1 12 1C15.315 1 18 3.685 18 7C18 10.315 15.315 13 12 13ZM12 11C14.21 11 16 9.21 16 7C16 4.79 14.21 3 12 3C9.79 3 8 4.79 8 7C8 9.21 9.79 11 12 11Z"})})})]})}),c?(0,o.jsx)("div",{className:"border-2 rounded fixed p-4 w-full bg-gray-100",children:(0,o.jsx)(G,{currentTab:t,currentResourceId:n,setCurrentResourceId:r,setOpenAddNote:d})}):null,(0,o.jsx)(k,{currentTab:t})]})}var J=r(34329),Q=r(37291);function ee(e,t,r,n,a,o,s){try{var i=e[o](s),u=i.value}catch(c){return void r(c)}i.done?t(u):Promise.resolve(u).then(n,a)}function te(){var e=(0,i.c)(),t=e.ceramic,r=e.composeClient,n=(0,s.useState)(!1),u=n[0],c=n[1],d=function(){var e,n=(e=a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.setItem("ceramic:auth_type","eth"),e.next=3,(0,Q.M)(t,r);case 3:e.sent&&window.location.reload();case 5:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function s(e){ee(o,n,a,s,i,"next",e)}function i(e){ee(o,n,a,s,i,"throw",e)}s(void 0)}))});return function(){return n.apply(this,arguments)}}();return(0,s.useEffect)((function(){localStorage.getItem("logged_in")&&c(!0)}),[]),(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"flex flex-col justify-center space-y-4",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,o.jsx)("img",{src:"/next-assets/icon32.png",className:"w-16 h-16 object-cover rounded-full",alt:"Idealite logo"}),(0,o.jsx)("p",{className:"text-4xl font-bold",children:"Idealite"})]}),u?(0,o.jsxs)("button",{type:"button",onClick:function(){return localStorage.removeItem("logged_in"),localStorage.removeItem("ceramic:did_seed"),localStorage.removeItem("ceramic:eth_did"),localStorage.removeItem("did"),localStorage.removeItem("ceramic:auth_type"),void window.location.reload()},className:"py-3 px-4 inline-flex items-center gap-x-2 text-sm font-semibold rounded-lg border border-transparent bg-gray-100 text-gray-800 hover:bg-gray-200 disabled:opacity-50 disabled:pointer-events-none dark:bg-white/10 dark:hover:bg-white/20 dark:text-white dark:hover:text-white dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600",children:[(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-6 h-6",children:(0,o.jsx)("path",{d:"M4 18H6V20H18V4H6V6H4V3C4 2.44772 4.44772 2 5 2H19C19.5523 2 20 2.44772 20 3V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V18ZM6 11H13V13H6V16L1 12L6 8V11Z"})}),"Logout"]}):(0,o.jsx)("button",{onClick:function(){return d()},className:"py-3 px-4 inline-flex items-center justify-around gap-x-2 text-sm font-semibold rounded-lg border border-transparent bg-yellow-500 text-white hover:bg-yellow-600 disabled:opacity-50 disabled:pointer-events-none dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600",children:"Login"})]}),(0,o.jsx)("button",{type:"button",onClick:function(){return window.location.reload()},className:"fixed top-0 left-0 flex justify-center items-center h-10 w-10 text-sm font-semibold rounded-full border border-transparent bg-gray-300 text-white hover:bg-gray-400 disabled:opacity-50 disabled:pointer-events-none dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600",children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-12 h-12",children:(0,o.jsx)("path",{d:"M10.8284 12.0007L15.7782 16.9504L14.364 18.3646L8 12.0007L14.364 5.63672L15.7782 7.05093L10.8284 12.0007Z"})})})]})}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ne(e,t,r,n,a,o,s){try{var i=e[o](s),u=i.value}catch(c){return void r(c)}i.done?t(u):Promise.resolve(u).then(n,a)}function ae(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function s(e){ne(o,n,a,s,i,"next",e)}function i(e){ne(o,n,a,s,i,"throw",e)}s(void 0)}))}}function oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],s=!0,i=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);s=!0);}catch(u){i=!0,a=u}finally{try{s||null==r.return||r.return()}finally{if(i)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return re(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return re(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var se=function(e){var t=e.loggedIn,r=e.setLoggedIn,n=(0,i.c)(),u=(n.ceramic,n.composeClient,(0,s.useState)("")),c=u[0],d=u[1],l=(0,s.useState)({}),f=l[0],h=l[1],p=(0,s.useState)(""),g=p[0],m=p[1],x=function(){var e=ae(a().mark((function e(){var t,r,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={active:!0,lastFocusedWindow:!0},e.t0=oe,e.next=4,chrome.tabs.query(t);case 4:return e.t1=e.sent,r=(0,e.t0)(e.t1,1),n=r[0],e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=ae(a().mark((function e(){var t,r,n,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:t=e.sent,h(t),r=(0,J.Z)(t.url).id,n=t.url.indexOf("#"),r&&(o="https://www.youtube.com/watch?v="+r,t.url=o,h(t)),n>-1&&(t.url=t.url.substring(0,n),h(t)),m(r);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){b()}),[]),t?(0,o.jsx)("div",{className:"dark:bg-gray-800 h-screen",children:g?(0,o.jsx)(W,{currentTab:f,youtubeId:g,currentResourceId:c,setCurrentResourceId:d,loggedIn:t,setLoggedIn:r}):(0,o.jsx)(X,{currentTab:f,setCurrentResourceId:d,currentResourceId:c,loggedIn:t,setLoggedIn:r})}):(0,o.jsx)("div",{className:"dark:bg-gray-800 h-screen flex justify-center items-center",children:(0,o.jsx)(te,{})})}}},function(e){e.O(0,[911,716,774,888,179],(function(){return t=78581,e(e.s=t);var t}));var t=e.O();_N_E=t}]);