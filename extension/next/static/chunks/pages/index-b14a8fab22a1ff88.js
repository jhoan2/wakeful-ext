(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{78581:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(13243)}])},13243:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return De}});var n=r(34051),a=r.n(n),s=r(85893),o=r(67294);function i(e,t,r,n,a,s,o){try{var i=e[s](o),l=i.value}catch(c){return void r(c)}i.done?t(l):Promise.resolve(l).then(n,a)}function l(e){e.styles;var t=e.subtitle,r=(e.currentTime,e.currentTabId),n=Math.floor(parseInt(t.start)),o=function(e){var t=document.querySelector(".html5-main-video");t&&(t.currentTime=e)},l=function(){var e,t=(e=a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.start,e.next=3,chrome.scripting.executeScript({target:{tabId:r},func:o,args:[n]});case 3:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var s=e.apply(t,r);function o(e){i(s,n,a,o,l,"next",e)}function l(e){i(s,n,a,o,l,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}();return(0,s.jsx)("div",{id:n,className:"p-2 m-2 border border-gray-300 rounded-lg hover:bg-gray-100 text-md max-w-md ",onClick:function(){return l(t)},children:t.text},t.start)}function c(e){var t=e.currentTabId,r=e.subtitles,n=e.currentTime,a=(0,o.useState)(0),i=a[0],c=a[1];if(i!==n){var d=Math.floor(n).toString(),u=document.getElementById(d);u&&(u.scrollIntoView({behavior:"smooth",block:"end"}),c(n))}return(0,s.jsx)("div",{children:r.map((function(e){return(0,s.jsx)(l,{subtitle:e,currentTime:n,currentTabId:t},e.start)}))})}var d=r(31230),u=r(37887),f=r(50319),g=r(27662);function m(e){var t=e.editor;return(0,s.jsxs)("div",{className:"flex center border-2 space-x-2 shadow-md bg-white",children:[(0,s.jsx)("div",{className:"hover:bg-gray-200 flex align-center",children:(0,s.jsx)("button",{onClick:function(){return t.chain().focus().toggleBold().run()},className:t.isActive("bold")?"is-active":"",children:(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",children:[(0,s.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"}),(0,s.jsx)("path",{d:"M8 11h4.5a2.5 2.5 0 1 0 0-5H8v5zm10 4.5a4.5 4.5 0 0 1-4.5 4.5H6V4h6.5a4.5 4.5 0 0 1 3.256 7.606A4.498 4.498 0 0 1 18 15.5zM8 13v5h5.5a2.5 2.5 0 1 0 0-5H8z"})]})})}),(0,s.jsx)("div",{className:"hover:bg-gray-200 flex align-center",children:(0,s.jsx)("button",{onClick:function(){return t.chain().focus().toggleItalic().run()},className:t.isActive("italic")?"is-active":"",children:(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",children:[(0,s.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"}),(0,s.jsx)("path",{d:"M15 20H7v-2h2.927l2.116-12H9V4h8v2h-2.927l-2.116 12H15z"})]})})}),(0,s.jsx)("div",{className:"hover:bg-gray-200 flex align-center",children:(0,s.jsx)("button",{onClick:function(){return t.chain().focus().toggleStrike().run()},className:t.isActive("strike")?"is-active":"",children:(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",children:[(0,s.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"}),(0,s.jsx)("path",{d:"M17.154 14c.23.516.346 1.09.346 1.72 0 1.342-.524 2.392-1.571 3.147C14.88 19.622 13.433 20 11.586 20c-1.64 0-3.263-.381-4.87-1.144V16.6c1.52.877 3.075 1.316 4.666 1.316 2.551 0 3.83-.732 3.839-2.197a2.21 2.21 0 0 0-.648-1.603l-.12-.117H3v-2h18v2h-3.846zm-4.078-3H7.629a4.086 4.086 0 0 1-.481-.522C6.716 9.92 6.5 9.246 6.5 8.452c0-1.236.466-2.287 1.397-3.153C8.83 4.433 10.271 4 12.222 4c1.471 0 2.879.328 4.222.984v2.152c-1.2-.687-2.515-1.03-3.946-1.03-2.48 0-3.719.782-3.719 2.346 0 .42.218.786.654 1.099.436.313.974.562 1.613.75.62.18 1.297.414 2.03.699z"})]})})})]})}var p=r(54929);function h(e){var t=e.cid;if(t)return(0,s.jsx)("div",{children:(0,s.jsx)("img",{src:"https://purple-defensive-anglerfish-674.mypinata.cloud/ipfs/".concat(t,"?img-width=240"),alt:"Image",loading:"lazy",width:240})})}var x=r(5351),b=r(13671),v=r(69624),w=r(81221),y=r(24122);function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function C(e,t,r,n,a,s,o){try{var i=e[s](o),l=i.value}catch(c){return void r(c)}i.done?t(l):Promise.resolve(l).then(n,a)}function k(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var s=e.apply(t,r);function o(e){C(s,n,a,o,i,"next",e)}function i(e){C(s,n,a,o,i,"throw",e)}o(void 0)}))}}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,s=[],o=!0,i=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(s.push(n.value),!t||s.length!==t);o=!0);}catch(l){i=!0,a=l}finally{try{o||null==r.return||r.return()}finally{if(i)throw a}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return j(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function S(){var e=I(["\n    mutation UPDATE_NOTE($input: UpdateIdealiteCardsInput!) {\n        updateIdealiteCards(input: $input) {\n          document {\n            id\n            annotation\n          }\n        }\n      }"]);return S=function(){return e},e}function L(){var e=I(["\n    mutation createProjectCardCollection($input: CreateIdealiteProjectCardCollectionInput!) {\n        createIdealiteProjectCardCollection(input: $input) {\n          document {\n            id\n          }\n        }\n      }\n      "]);return L=function(){return e},e}function P(){var e=I(["\n    query getRecentProjects {\n        viewer {\n          idealiteProjectList(\n            last: 7\n            sorting: {priority: DESC}\n            filters: {where: {deleted: {equalTo: false}}}\n          ) {\n            edges {\n              node {\n                id\n                title\n              }\n            }\n          }\n        }\n      }\n      "]);return P=function(){return e},e}function H(e){var t,r,n,o,i=e.id,l=(0,y.SE)().userProfile,c=(0,d.Ps)(S()),g=N((0,f.D)(c,{refetchQueries:["getCardsPeUrlPerUser"]}),1)[0],m=function(){var e=k(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g({variables:{input:{id:i,content:{updatedAt:(new Date).toISOString(),deleted:!0}}}});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=(0,d.Ps)(L()),h=N((0,f.D)(p),2),j=h[0],C=h[1],I=C.loading,H=C.error,A=function(){var e=k(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j({variables:{input:{content:{deleted:!1,projectId:t,idealiteCardId:i}}}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=(0,d.Ps)(P()),V=(0,u.a)(M),O=V.loading,Z=V.error,T=V.data;return(0,s.jsx)("div",{className:"absolute top-2 right-2",children:(0,s.jsxs)(w.fC,{children:[(0,s.jsx)(w.xz,{asChild:!0,children:(0,s.jsx)("button",{className:"hover:bg-slate-100 hover:text-slate-900 dark:hover:bg-slate-800 dark:hover:text-slate-50",children:(0,s.jsx)(x.Z,{className:"h-4 w-4"})})}),(0,s.jsx)(w.Uv,{children:(0,s.jsxs)(w.VY,{className:"z-50 min-w-[8rem] overflow-hidden rounded-md border border-slate-200 bg-white p-1 text-slate-950 shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-50",children:[(0,s.jsx)(w.__,{className:"px-2 py-1.5 text-sm font-semibold",children:"Actions"}),(0,s.jsx)(w.Z0,{className:"mx-1 my-1 h-px bg-slate-100 dark:bg-slate-800"}),(0,s.jsxs)(w.ck,{onClick:function(){return m(i)},className:"text-red-600 relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-red-100 focus:text-red-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-slate-800 dark:focus:text-slate-50",children:[(0,s.jsx)(b.Z,{className:"mr-2 h-4 w-4"}),"Delete"]}),(0,s.jsxs)(w.Tr,{className:"z-50 min-w-[8rem] overflow-hidden rounded-md border border-slate-200 bg-white p-1 text-slate-950 shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-50",children:[(0,s.jsxs)(w.fF,{className:"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-slate-100 data-[state=open]:bg-slate-100 dark:focus:bg-slate-800 dark:data-[state=open]:bg-slate-800",children:[(0,s.jsx)(v.Z,{className:"mr-2 h-4 w-4"}),(0,s.jsx)("span",{children:"Send to Project"})]}),(0,s.jsx)(w.Uv,{children:(0,s.jsxs)(w.tu,{className:"z-50 min-w-[8rem] max-w-36 overflow-hidden rounded-md border border-slate-200 bg-white p-1 text-slate-950 shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-50",children:[!l.displayName&&(0,s.jsx)(w.ck,{disabled:!l.displayName,className:"relative flex w-32 max-w-36 cursor-default text-pretty select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-slate-100 focus:text-slate-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-slate-800 dark:focus:text-slate-50",children:(0,s.jsx)("span",{children:"No Profile. Log into the website to automatically create one."})}),O&&(0,s.jsx)("span",{children:"Loading..."}),Z&&(0,s.jsx)("span",{children:"Error loading projects"}),(null===T||void 0===T||null===(t=T.viewer)||void 0===t||null===(r=t.idealiteProjectList)||void 0===r?void 0:r.edges)?null===T||void 0===T||null===(n=T.viewer)||void 0===n||null===(o=n.idealiteProjectList)||void 0===o?void 0:o.edges.map((function(e){return(0,s.jsx)(w.ck,{onClick:function(){return A(e.node.id)},className:"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-slate-100 focus:text-slate-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-slate-800 dark:focus:text-slate-50",children:(0,s.jsx)("span",{children:I?"Sending..":H?"Error":e.node.title})},e.node.id)})):(0,s.jsx)("span",{children:"No Projects"})]})})]})]})})]})})}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function M(e,t,r,n,a,s,o){try{var i=e[s](o),l=i.value}catch(c){return void r(c)}i.done?t(l):Promise.resolve(l).then(n,a)}function V(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var s=e.apply(t,r);function o(e){M(s,n,a,o,i,"next",e)}function i(e){M(s,n,a,o,i,"throw",e)}o(void 0)}))}}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,s=[],o=!0,i=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(s.push(n.value),!t||s.length!==t);o=!0);}catch(l){i=!0,a=l}finally{try{o||null==r.return||r.return()}finally{if(i)throw a}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return A(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return A(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(){var e,t,r=(e=["\n    mutation UPDATE_NOTE($input: UpdateIdealiteCardsInput!) {\n        updateIdealiteCards(input: $input) {\n          document {\n            id\n            annotation\n          }\n        }\n      }"],t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})));return Z=function(){return r},r}function T(e){var t=e.content,r=e.currentTab,n=function(e,t){var r=document.body.scrollHeight;if(t!==r){var n=e/t*r-20;window.scrollTo(0,n)}else e-=20,window.scrollTo(0,e)},i=t.node,l=i.id,c=i.quote,u=i.annotation,x=i.pageYOffset,b=i.scrollHeight,v=i.cid,w=i.googleBooksPage,y=r.id,j=(r.url,(0,o.useState)(!1)),C=j[0],k=j[1],N=(0,o.useState)(null),I=N[0],S=N[1],L=(0,o.useState)(!1),P=L[0],A=L[1],M=(0,d.Ps)(Z()),T=O((0,f.D)(M,{refetchQueries:["getCardsPeUrlPerUser"]}),2),R=T[0],z=T[1],D=(z.data,z.loading),E=z.error,B=function(){var e=V(a().mark((function e(){var t,r,n,s,o,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=_.getHTML(),!I){e.next=8;break}return e.next=5,$(I);case 5:s=e.sent,r=null===s||void 0===s?void 0:s.IpfsHash,n=null===s||void 0===s?void 0:s.PinSize;case 8:for(i in o={updatedAt:(new Date).toISOString(),annotation:t,cid:r,mimeType:null===I||void 0===I?void 0:I.type,pinSize:n})void 0!==o[i]&&null!==o[i]||delete o[i];return e.next=12,R({variables:{input:{id:l,content:o}}});case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=V(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,chrome.scripting.executeScript({target:{tabId:y},func:n,args:[x,b]});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=V(a().mark((function e(t){var r,n,s,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).set("file",t),e.prev=2,e.next=5,fetch("http://localhost:3000/api/cardImage",{method:"POST",body:r});case 5:if((n=e.sent).ok){e.next=8;break}throw new Error("HTTP error! status: ".concat(n.status));case 8:return e.next=10,n.json();case 10:return s=e.sent,o=s.pinataData,e.abrupt("return",o);case 15:e.prev=15,e.t0=e.catch(2),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t){return e.apply(this,arguments)}}(),_=(0,g.jE)({extensions:[p.Z],editorProps:{attributes:{class:"prose prose-md lg:prose-lg dark:prose-invert hover:outline outline-amber-400 max-w-full outline-offset-2 outline-2 rounded-md"}},content:u,onUpdate:function(e){e.editor;A(!0)}});return D?"Submitting...":E?"Submission error! ".concat(E.message):c||u||v?(0,s.jsxs)("div",{className:"border-2 rounded relative p-6",children:[(0,s.jsx)(H,{id:l}),c?(0,s.jsx)("p",{className:"italic border rounded p-2 hover:bg-gray-100",onClick:function(){return U()},children:c}):null,v?(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsx)(h,{cid:v})}):null,_&&(0,s.jsx)(g.NM,{editor:_,tippyOptions:{duration:100},children:(0,s.jsx)(m,{editor:_})}),(0,s.jsx)(g.kg,{editor:_,className:"".concat(C?"hidden":"")}),I&&(0,s.jsx)("img",{src:URL.createObjectURL(I),alt:"Pasted Image"}),C?(0,s.jsx)("input",{onPaste:function(e){var t=e.clipboardData;if(t&&t.items.length){var r=t.items[0];if(r.type.startsWith("image/")){var n=r.getAsFile();S(n),document.getElementById("input-image").disabled=!0}else{document.getElementById("paste-image").value=""}}},id:"paste-image",className:"".concat(I&&"hidden"," placeholder:italic placeholder:text-slate-400 block bg-white w-full border border-slate-300 rounded-md py-2 pr-3 shadow-sm focus:outline-none focus:border-sky-500 focus:ring-sky-500 focus:ring-1 sm:text-sm"),placeholder:"Paste image here",type:"text",name:"Paste Image",autoComplete:"off"}):null,(0,s.jsxs)("div",{className:"flex mt-3 justify-between items-center",children:[(0,s.jsx)("input",{type:"file",id:"input-image",onChange:function(e){return t=e.target.files[0],S(t),void A(!0);var t},className:"".concat(C?"":"invisible"," file:py-2 file:px-3 file:inline-flex file:items-center file:gap-x-2 file:text-sm file:font-semibold file:rounded-lg file:border file:border-transparent file:bg-blue-100 file:text-blue-800 file:hover:bg-blue-200 file:disabled:opacity-50 file:disabled:pointer-events-none file:dark:hover:bg-blue-900 file:dark:text-blue-400 file:dark:focus:outline-none file:dark:focus:ring-1 file:dark:focus:ring-gray-600")}),(0,s.jsxs)("div",{className:"flex space-x-3",children:[v?null:(0,s.jsx)("button",{onClick:function(){return k(!C)},className:"py-2 px-3 inline-flex items-center gap-x-2 text-sm font-semibold rounded-lg border border-transparent bg-blue-100 text-blue-800 hover:bg-blue-200 disabled:opacity-50 disabled:pointer-events-none dark:hover:bg-blue-900 dark:text-blue-400 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600",title:"Add an image",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-6 h-6",children:(0,s.jsx)("path",{d:"M2.9918 21C2.44405 21 2 20.5551 2 20.0066V3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082C21.556 3 22 3.44495 22 3.9934V20.0066C22 20.5552 21.5447 21 21.0082 21H2.9918ZM20 15V5H4V19L14 9L20 15ZM20 17.8284L14 11.8284L6.82843 19H20V17.8284ZM8 11C6.89543 11 6 10.1046 6 9C6 7.89543 6.89543 7 8 7C9.10457 7 10 7.89543 10 9C10 10.1046 9.10457 11 8 11Z"})})}),P||I?(0,s.jsxs)("button",{title:"Submit Note",onClick:function(){return B()},className:"py-2 px-3 inline-flex items-center gap-x-2 text-sm font-semibold rounded-lg border border-transparent bg-blue-100 text-blue-800 hover:bg-blue-200 disabled:opacity-50 disabled:pointer-events-none dark:hover:bg-blue-900 dark:text-blue-400 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600",children:[D?(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-3 h-3 animate-spin",children:(0,s.jsx)("path",{d:"M11.9995 2C12.5518 2 12.9995 2.44772 12.9995 3V6C12.9995 6.55228 12.5518 7 11.9995 7C11.4472 7 10.9995 6.55228 10.9995 6V3C10.9995 2.44772 11.4472 2 11.9995 2ZM11.9995 17C12.5518 17 12.9995 17.4477 12.9995 18V21C12.9995 21.5523 12.5518 22 11.9995 22C11.4472 22 10.9995 21.5523 10.9995 21V18C10.9995 17.4477 11.4472 17 11.9995 17ZM20.6597 7C20.9359 7.47829 20.772 8.08988 20.2937 8.36602L17.6956 9.86602C17.2173 10.1422 16.6057 9.97829 16.3296 9.5C16.0535 9.02171 16.2173 8.41012 16.6956 8.13398L19.2937 6.63397C19.772 6.35783 20.3836 6.52171 20.6597 7ZM7.66935 14.5C7.94549 14.9783 7.78161 15.5899 7.30332 15.866L4.70525 17.366C4.22695 17.6422 3.61536 17.4783 3.33922 17C3.06308 16.5217 3.22695 15.9101 3.70525 15.634L6.30332 14.134C6.78161 13.8578 7.3932 14.0217 7.66935 14.5ZM20.6597 17C20.3836 17.4783 19.772 17.6422 19.2937 17.366L16.6956 15.866C16.2173 15.5899 16.0535 14.9783 16.3296 14.5C16.6057 14.0217 17.2173 13.8578 17.6956 14.134L20.2937 15.634C20.772 15.9101 20.9359 16.5217 20.6597 17ZM7.66935 9.5C7.3932 9.97829 6.78161 10.1422 6.30332 9.86602L3.70525 8.36602C3.22695 8.08988 3.06308 7.47829 3.33922 7C3.61536 6.52171 4.22695 6.35783 4.70525 6.63397L7.30332 8.13398C7.78161 8.41012 7.94549 9.02171 7.66935 9.5Z"})}):null,"Submit"]}):null]})]}),w?(0,s.jsx)("div",{className:"flex justify-start pt-2",children:(0,s.jsxs)("p",{className:" bg-yellow-100 text-yellow-800 text-xs font-medium me-2 px-2.5 py-0.5 rounded dark:bg-gray-700 dark:text-yellow-300 border border-yellow-300",children:["page: ",w]})}):null]}):null}function R(){return(0,s.jsx)("div",{className:"flex-grow flex justify-center items-center h-screen",children:(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)("div",{className:"rounded-full bg-gray-200 p-10 inline-flex justify-center items-center",children:(0,s.jsx)("img",{src:"/next-assets/no-content-cat.png",width:160,height:160,className:"object-cover rounded-full",alt:"No Content Cat Image"})}),(0,s.jsx)("p",{className:"mt-4 text-2xl font-semibold text-gray-800",children:"No content yet"})]})})}function z(e){var t=e.data,r=e.currentTab;return t&&0!==(null===t||void 0===t?void 0:t.length)?(0,s.jsx)("div",{className:"m-2 space-y-2",children:t.map((function(e){return(0,s.jsx)(T,{currentTab:r,content:e},e.node.id)}))}):(0,s.jsx)(R,{})}function D(e){var t=e.message;return(0,s.jsx)("div",{className:"flex h-screen",children:(0,s.jsx)("div",{className:"flex-grow flex justify-center items-center",children:(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)("div",{className:"rounded-full bg-gray-200 p-10 inline-flex justify-center items-center",children:(0,s.jsx)("img",{src:"/next-assets/error-blue-cat.png",width:160,height:160,className:"object-cover rounded-full",alt:"Error blue cat image"})}),(0,s.jsx)("p",{className:"mt-4 text-2xl font-semibold text-gray-800",children:t})]})})})}function E(){return(0,s.jsxs)("div",{className:"space-y-2 max-w-md",children:[(0,s.jsxs)("div",{className:"border-2 rounded relative p-6 animate-pulse",children:[(0,s.jsx)("button",{className:"absolute top-0 right-1 text-slate-300 bg-slate-400 rounded-md p-1",children:"X"}),(0,s.jsx)("button",{className:"absolute bottom-0 left-1 bg-slate-400 rounded-md p-1",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-3.5 h-3.5 text-gray-300",children:(0,s.jsx)("path",{d:"M12.9999 16.1716L18.3638 10.8076L19.778 12.2218L11.9999 20L4.22168 12.2218L5.63589 10.8076L10.9999 16.1716V4H12.9999V16.1716Z"})})}),(0,s.jsx)("div",{className:"italic border rounded p-2 bg-slate-400"}),(0,s.jsx)("div",{className:"italic border rounded p-2 bg-slate-400"}),(0,s.jsx)("div",{className:"italic border rounded p-2 bg-slate-400"})]}),(0,s.jsxs)("div",{className:"border-2 rounded relative p-6 animate-pulse",children:[(0,s.jsx)("button",{className:"absolute top-0 right-1 text-slate-300 bg-slate-400 rounded-md p-1",children:"X"}),(0,s.jsx)("button",{className:"absolute bottom-0 left-1 bg-slate-400 rounded-md p-1",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-3.5 h-3.5 text-gray-300",children:(0,s.jsx)("path",{d:"M12.9999 16.1716L18.3638 10.8076L19.778 12.2218L11.9999 20L4.22168 12.2218L5.63589 10.8076L10.9999 16.1716V4H12.9999V16.1716Z"})})}),(0,s.jsx)("div",{className:"italic border rounded p-2 bg-slate-400"}),(0,s.jsx)("div",{className:"italic border rounded p-2 bg-slate-400"}),(0,s.jsx)("div",{className:"italic border rounded p-2 bg-slate-400"})]})]})}function B(){var e,t,r=(e=["\n  query getCardsPeUrlPerUser ($url: String, $clientMutationId: ID!, $cursor: String) {\n    node(id: $clientMutationId) {\n      ... on CeramicAccount {\n        idealiteCardsList(\n          filters: {where: {deleted: {equalTo: false}, url: {equalTo: $url}}}\n          first: 10\n          after: $cursor\n          sorting: {updatedAt: DESC}\n          ) {\n          edges {\n            node {\n              annotation\n              id\n              cid\n              createdAt\n              pageYOffset\n              scrollHeight\n              updatedAt\n              videoTime\n              quote\n              googleBooksPage\n            }\n          }\n          pageInfo {\n            hasNextPage\n            endCursor\n          }\n        }\n      }\n    }\n  }\n  "],t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})));return B=function(){return r},r}function U(e){var t,r,n=e.currentTab,a=(e.setCurrentResourceId,n.url),o=(0,y.cJ)(),i=(o.ceramic,o.composeClient.id),l=(0,d.Ps)(B()),c=(0,u.a)(l,{variables:{url:a,clientMutationId:i}}),f=c.loading,g=c.error,m=c.data,p=c.fetchMore;if(f)return(0,s.jsx)(E,{});if(g)return(0,s.jsx)(D,{message:g.message});var h=null===(t=m.node)||void 0===t?void 0:t.idealiteCardsList.edges,x=null===(r=m.node)||void 0===r?void 0:r.idealiteCardsList.pageInfo;return(0,s.jsxs)("div",{className:"dark:text-white",children:[m?(0,s.jsx)(z,{data:h,currentTab:n}):(0,s.jsx)("div",{className:"h-screen flex justify-center items-center",children:(0,s.jsx)(R,{})}),x.hasNextPage?(0,s.jsx)("button",{onClick:function(){x.hasNextPage&&p({variables:{cursor:x.endCursor}})},className:"hover:bg-gradient-to-r from-amber-200 to-yellow-400 rounded-full bg-yellow-100 w-full h-8 text-sm font-semibold rounded-full border border-transparent text-gray-500 disabled:opacity-50",children:"Load more"}):null]})}function $(e){var t=e.currentTab;return(0,s.jsx)("div",{children:(0,s.jsx)(U,{currentTab:t})})}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Y(e,t,r,n,a,s,o){try{var i=e[s](o),l=i.value}catch(c){return void r(c)}i.done?t(l):Promise.resolve(l).then(n,a)}function q(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var s=e.apply(t,r);function o(e){Y(s,n,a,o,i,"next",e)}function i(e){Y(s,n,a,o,i,"throw",e)}o(void 0)}))}}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,s=[],o=!0,i=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(s.push(n.value),!t||s.length!==t);o=!0);}catch(l){i=!0,a=l}finally{try{o||null==r.return||r.return()}finally{if(i)throw a}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return _(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(){var e,t,r=(e=["\n    mutation ADD_NOTE($input: CreateIdealiteCardsInput!) {\n        createIdealiteCards(input: $input) {\n          document {\n            id\n          }\n        }\n      }"],t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})));return J=function(){return r},r}function W(e){var t=e.currentTab,r=e.currentResourceId,n=e.setCurrentResourceId,i=e.createNewYoutubeResource,l=e.setYoutubeOpenAddNote,c=e.loadingNewYoutubeResource,u=(0,o.useState)(!1),h=u[0],x=u[1],b=(0,o.useState)(null),v=b[0],w=b[1],y=(0,d.Ps)(J()),j=F((0,f.D)(y,{onCompleted:function(){return l(!1)},refetchQueries:["getCardsPeUrlPerUser"]}),2),C=j[0],k=j[1],N=k.loading,I=k.error,S=(0,g.jE)({extensions:[p.Z],editorProps:{attributes:{class:"prose prose-md lg:prose-lg dark:prose-invert outline outline-amber-400 max-w-full outline-offset-2 outline-2 rounded-md"}},content:""}),L=function(){var e=q(a().mark((function e(t){var r,n,s,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).set("file",t),e.prev=2,e.next=5,fetch("http://localhost:3000/api/cardImage",{method:"POST",body:r});case 5:if((n=e.sent).ok){e.next=8;break}throw new Error("HTTP error! status: ".concat(n.status));case 8:return e.next=10,n.json();case 10:return s=e.sent,o=s.pinataData,e.abrupt("return",o);case 15:e.prev=15,e.t0=e.catch(2),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=q(a().mark((function e(){var s,o,l,c,d,u,f;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=r,r){e.next=6;break}return e.next=4,i();case 4:s=e.sent,n(s);case 6:if(o=S.getHTML(),!v){e.next=14;break}return e.next=11,L(v);case 11:d=e.sent,l=null===d||void 0===d?void 0:d.IpfsHash,c=null===d||void 0===d?void 0:d.PinSize;case 14:for(f in u={createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),annotation:o,cid:l,mimeType:null===v||void 0===v?void 0:v.type,pinSize:c,resourceId:s,url:t.url,deleted:!1})void 0!==u[f]&&null!==u[f]||delete u[f];C({variables:{input:{content:u}}});case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return N?"Submitting...":I?"Submission error! ".concat(I.message):(0,s.jsxs)("div",{className:"flex flex-col pt-2",children:[(0,s.jsx)("div",{className:"flex justify-end mb-3",children:(0,s.jsx)("button",{className:"hover:bg-gray-300 rounded-xl",title:"Close Modal",onClick:function(){return l(!1)},children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-4 h-4",children:(0,s.jsx)("path",{d:"M12.0007 10.5865L16.9504 5.63672L18.3646 7.05093L13.4149 12.0007L18.3646 16.9504L16.9504 18.3646L12.0007 13.4149L7.05093 18.3646L5.63672 16.9504L10.5865 12.0007L5.63672 7.05093L7.05093 5.63672L12.0007 10.5865Z"})})})}),S&&(0,s.jsx)(g.NM,{editor:S,tippyOptions:{duration:100},children:(0,s.jsx)(m,{editor:S})}),(0,s.jsx)(g.kg,{editor:S,className:"".concat(h?"hidden":"")}),v&&(0,s.jsx)("img",{src:URL.createObjectURL(v),alt:"Pasted Image"}),h?(0,s.jsx)("input",{onPaste:function(e){var t=e.clipboardData;if(t&&t.items.length){var r=t.items[0];if(r.type.startsWith("image/")){var n=r.getAsFile();w(n),document.getElementById("input-image").disabled=!0}else{document.getElementById("paste-image").value=""}}},id:"paste-image",className:"".concat(v&&"hidden"," placeholder:italic placeholder:text-slate-400 block bg-white w-full border border-slate-300 rounded-md py-2 pr-3 shadow-sm focus:outline-none focus:border-sky-500 focus:ring-sky-500 focus:ring-1 sm:text-sm"),placeholder:"Paste image here",type:"text",name:"Paste Image",autoComplete:"off"}):null,(0,s.jsxs)("div",{className:"flex mt-3 justify-between items-center",children:[(0,s.jsx)("input",{type:"file",id:"input-image",onChange:function(e){return w(e.target.files[0])},className:"".concat(h?"":"invisible"," file:py-2 file:px-3 file:inline-flex file:items-center file:gap-x-2 file:text-sm file:font-semibold file:rounded-lg file:border file:border-transparent file:bg-blue-100 file:text-blue-800 file:hover:bg-blue-200 file:disabled:opacity-50 file:disabled:pointer-events-none file:dark:hover:bg-blue-900 file:dark:text-blue-400 file:dark:focus:outline-none file:dark:focus:ring-1 file:dark:focus:ring-gray-600")}),(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsx)("button",{onClick:function(){return x(!h)},className:"py-2 px-3 inline-flex items-center gap-x-2 text-sm font-semibold rounded-lg border border-transparent bg-blue-100 text-blue-800 hover:bg-blue-200 disabled:opacity-50 disabled:pointer-events-none dark:hover:bg-blue-900 dark:text-blue-400 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600",title:"Add an image",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-6 h-6",children:(0,s.jsx)("path",{d:"M2.9918 21C2.44405 21 2 20.5551 2 20.0066V3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082C21.556 3 22 3.44495 22 3.9934V20.0066C22 20.5552 21.5447 21 21.0082 21H2.9918ZM20 15V5H4V19L14 9L20 15ZM20 17.8284L14 11.8284L6.82843 19H20V17.8284ZM8 11C6.89543 11 6 10.1046 6 9C6 7.89543 6.89543 7 8 7C9.10457 7 10 7.89543 10 9C10 10.1046 9.10457 11 8 11Z"})})}),(0,s.jsxs)("button",{title:"Submit Note",onClick:function(){return P()},className:"py-2 px-3 inline-flex items-center gap-x-2 text-sm font-semibold rounded-lg border border-transparent bg-blue-100 text-blue-800 hover:bg-blue-200 disabled:opacity-50 disabled:pointer-events-none dark:hover:bg-blue-900 dark:text-blue-400 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600",children:[N?(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-3 h-3 animate-spin",children:(0,s.jsx)("path",{d:"M11.9995 2C12.5518 2 12.9995 2.44772 12.9995 3V6C12.9995 6.55228 12.5518 7 11.9995 7C11.4472 7 10.9995 6.55228 10.9995 6V3C10.9995 2.44772 11.4472 2 11.9995 2ZM11.9995 17C12.5518 17 12.9995 17.4477 12.9995 18V21C12.9995 21.5523 12.5518 22 11.9995 22C11.4472 22 10.9995 21.5523 10.9995 21V18C10.9995 17.4477 11.4472 17 11.9995 17ZM20.6597 7C20.9359 7.47829 20.772 8.08988 20.2937 8.36602L17.6956 9.86602C17.2173 10.1422 16.6057 9.97829 16.3296 9.5C16.0535 9.02171 16.2173 8.41012 16.6956 8.13398L19.2937 6.63397C19.772 6.35783 20.3836 6.52171 20.6597 7ZM7.66935 14.5C7.94549 14.9783 7.78161 15.5899 7.30332 15.866L4.70525 17.366C4.22695 17.6422 3.61536 17.4783 3.33922 17C3.06308 16.5217 3.22695 15.9101 3.70525 15.634L6.30332 14.134C6.78161 13.8578 7.3932 14.0217 7.66935 14.5ZM20.6597 17C20.3836 17.4783 19.772 17.6422 19.2937 17.366L16.6956 15.866C16.2173 15.5899 16.0535 14.9783 16.3296 14.5C16.6057 14.0217 17.2173 13.8578 17.6956 14.134L20.2937 15.634C20.772 15.9101 20.9359 16.5217 20.6597 17ZM7.66935 9.5C7.3932 9.97829 6.78161 10.1422 6.30332 9.86602L3.70525 8.36602C3.22695 8.08988 3.06308 7.47829 3.33922 7C3.61536 6.52171 4.22695 6.35783 4.70525 6.63397L7.30332 8.13398C7.78161 8.41012 7.94549 9.02171 7.66935 9.5Z"})}):null,"Submit"]})]})]}),c?(0,s.jsx)("div",{className:"text-right",children:"Creating New Resource..."}):null]})}var Q=r(14394);function G(){return(0,s.jsxs)("div",{className:"p-2 m-2 border border-gray-300 rounded-lg max-w-md animate-pulse",children:[(0,s.jsx)("div",{className:"mt-1 w-full h-4 bg-slate-400"}),(0,s.jsx)("div",{className:"mt-1 w-full h-4 bg-slate-400"})]})}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function K(e,t,r,n,a,s,o){try{var i=e[s](o),l=i.value}catch(c){return void r(c)}i.done?t(l):Promise.resolve(l).then(n,a)}function ee(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var s=e.apply(t,r);function o(e){K(s,n,a,o,i,"next",e)}function i(e){K(s,n,a,o,i,"throw",e)}o(void 0)}))}}function te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,s=[],o=!0,i=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(s.push(n.value),!t||s.length!==t);o=!0);}catch(l){i=!0,a=l}finally{try{o||null==r.return||r.return()}finally{if(i)throw a}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return X(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return X(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function ne(){var e=re(["\n    mutation createAccountResource($input: CreateIdealiteAccountResourcesInput!) {\n        createIdealiteAccountResources(input: $input) {\n          document {\n            id\n          }\n        }\n      }\n      "]);return ne=function(){return e},e}function ae(){var e=re(["\n    mutation ADD_NOTE($input: CreateIdealiteCardsInput!) {\n        createIdealiteCards(input: $input) {\n          document {\n            id\n          }\n        }\n      }"]);return ae=function(){return e},e}function se(e){var t=e.currentTab,r=e.youtubeId,n=e.currentResourceId,i=e.setCurrentResourceId,l=e.loggedIn,u=e.setLoggedIn,g=function(){var e=document.querySelector(".html5-main-video");if(e)return e.currentTime},m=function(){var e=document.querySelector(".html5-main-video"),t=e.currentTime;if(e){var r=document.createElement("canvas");return r.width=e.videoWidth,r.height=e.videoHeight,r.getContext("2d").drawImage(e,0,0,r.width,r.height),{dataUrl:r.toDataURL("image/jpeg"),videoTime:t}}console.log("no video found")},p=function(e){for(var t=e.split(","),r=t[0].match(/:(.*?);/)[1],n=atob(t[1]),a=n.length,s=new Uint8Array(a);a--;)s[a]=n.charCodeAt(a);return new Blob([s],{type:r})},h=(0,o.useState)(!1),x=h[0],b=h[1],v=(0,o.useState)(!1),w=v[0],j=v[1],C=t.id,k=(0,o.useState)(""),N=k[0],I=k[1],S=(0,o.useState)(""),L=S[0],P=S[1],H=(0,o.useState)(!1),A=H[0],M=H[1],V=(0,y.cJ)().composeClient,O=r,Z=(0,o.useState)([]),T=Z[0],R=Z[1],z=(0,o.useState)(!1),D=z[0],E=z[1],B=function(){var e=ee(a().mark((function e(t){var r,n,s=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:"en",e.prev=1,M(!0),e.next=5,(0,Q.getVideoDetails)({videoID:t,lang:r});case 5:(n=e.sent)&&R(n.subtitles),M(!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),M(!1),console.error("Error fetching video details:",e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),U=function(e){var t=setInterval(ee(a().mark((function t(){var r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,chrome.scripting.executeScript({target:{tabId:e},func:g});case 2:r=t.sent,P(r[0].result);case 4:case"end":return t.stop()}}),t)}))),1e3);I(t)},_=function(){var e=ee(a().mark((function e(){var r,n,s,o,i,l,c,d,u,f;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.id,-1!==t.url.indexOf("youtube.com/watch?v=")){e.next=4;break}return console.log("Not a youtube video"),e.abrupt("return");case 4:return e.prev=4,e.next=7,chrome.scripting.executeScript({target:{tabId:r},func:m});case 7:return n=e.sent,s=n[0].result.dataUrl,o=n[0].result.videoTime,i=p(s),l=new FormData,c=new File([i],"image.jpg",{type:"image/jpeg"}),l.set("file",c),e.next=16,fetch("http://localhost:3000/api/cardImage",{method:"POST",body:l});case 16:if((d=e.sent).ok){e.next=19;break}throw new Error("Server responded with an error: "+d.status);case 19:return e.next=21,d.json();case 21:return u=e.sent,f=u.pinataData,e.abrupt("return",{videoTime:o,pinataData:f});case 26:e.prev=26,e.t0=e.catch(4),console.error(e.t0);case 29:case"end":return e.stop()}}),e,null,[[4,26]])})));return function(){return e.apply(this,arguments)}}(),Y=(0,d.Ps)(ne()),q=te((0,f.D)(Y,{onError:function(e){return console.log("Error creating account resource: "+e.message)}}),1)[0],F=function(){var e=ee(a().mark((function e(){var r,n,s,o,i,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!0),e.next=3,_();case 3:return r=e.sent,n=r.pinataData.IpfsHash,s=V.id,o=(new Date).toISOString(),e.next=9,fetch("http://localhost:3000/api/createNewYoutubeResource",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clientMutationId:s,url:t.url,title:t.title,createdAt:o,updatedAt:o,cid:n})});case 9:if((i=e.sent).ok){e.next=12;break}throw new Error("Server responded with an error: "+i.status);case 12:return e.next=14,i.json();case 14:return l=e.sent,console.log(l),e.next=18,q({variables:{input:{content:{recipient:s,resourceId:l.newResourceId,url:t.url,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),readingStatus:"READING"}}}});case 18:return e.abrupt("return",l.newResourceId);case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=(0,d.Ps)(ae()),X=te((0,f.D)(J,{refetchQueries:["getCardsPeUrlPerUser"]}),2),K=X[0],re=X[1],se=(re.data,re.loading,re.error),oe=function(){var e=ee(a().mark((function e(){var r,s,o,l,c,d;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n,n){e.next=6;break}return e.next=4,F();case 4:r=e.sent,i(r);case 6:return e.next=8,_();case 8:s=e.sent,o=s.videoTime,l=o.toString(),c=s.pinataData.IpfsHash,d=s.pinataData.PinSize,K({variables:{input:{content:{createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),resourceId:r,cid:c,videoTime:l,pinSize:d,url:t.url,deleted:!1}}}}),E(!1);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){B(O,"en"),U(C)}),[]),se?"Submission error! ".concat(se.message):(0,s.jsxs)("div",{id:"subtitle-container",children:[(0,s.jsx)("div",{id:"youtube-panel-menu",className:"flex justify-center my-5",children:(0,s.jsxs)("div",{className:"fixed top-0",children:[(0,s.jsx)("button",{type:"button",title:"Change Panel",onClick:function(){return x?U(C):clearInterval(N),void b(!x)},className:"py-3 px-4 inline-flex items-center gap-x-2 -ms-px first:rounded-s-lg first:ms-0 last:rounded-e-lg text-sm font-medium focus:z-10 border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-slate-900 dark:border-gray-700 dark:text-white dark:hover:bg-gray-800 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600",children:x?(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-3 h-3",children:(0,s.jsx)("path",{d:"M21 3C21.5523 3 22 3.44772 22 4V20C22 20.5523 21.5523 21 21 21H3C2.44772 21 2 20.5523 2 20V4C2 3.44772 2.44772 3 3 3H21ZM20 5H4V19H20V5ZM9 8C10.1045 8 11.1049 8.44841 11.829 9.173L10.4153 10.5866C10.0534 10.2241 9.55299 10 9 10C7.895 10 7 10.895 7 12C7 13.105 7.895 14 9 14C9.5525 14 10.0525 13.7762 10.4144 13.4144L11.828 14.828C11.104 15.552 10.104 16 9 16C6.792 16 5 14.208 5 12C5 9.792 6.792 8 9 8ZM16 8C17.1045 8 18.1049 8.44841 18.829 9.173L17.4153 10.5866C17.0534 10.2241 16.553 10 16 10C14.895 10 14 10.895 14 12C14 13.105 14.895 14 16 14C16.5525 14 17.0525 13.7762 17.4144 13.4144L18.828 14.828C18.104 15.552 17.104 16 16 16C13.792 16 12 14.208 12 12C12 9.792 13.792 8 16 8Z"})}):(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-3 h-3",children:(0,s.jsx)("path",{d:"M20.0049 2C21.1068 2 22 2.89821 22 3.9908V20.0092C22 21.1087 21.1074 22 20.0049 22H4V18H2V16H4V13H2V11H4V8H2V6H4V2H20.0049ZM8 4H6V20H8V4ZM20 4H10V20H20V4Z"})})}),(0,s.jsx)("button",{type:"button",title:"Add Note",onClick:function(){return j(!w)},className:"py-3 px-4 inline-flex items-center gap-x-2 -ms-px first:rounded-s-lg first:ms-0 last:rounded-e-lg text-sm font-medium focus:z-10 border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-slate-900 dark:border-gray-700 dark:text-white dark:hover:bg-gray-800 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-3 h-3",children:(0,s.jsx)("path",{d:"M15 4H5V20H19V8H15V4ZM3 2.9918C3 2.44405 3.44749 2 3.9985 2H16L20.9997 7L21 20.9925C21 21.5489 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5447 3 21.0082V2.9918ZM11 11V8H13V11H16V13H13V16H11V13H8V11H11Z"})})}),(0,s.jsx)("button",{type:"button",title:"Youtube Screenshot",onClick:function(){return oe()},className:"py-3 px-4 inline-flex items-center gap-x-2 -ms-px first:rounded-s-lg first:ms-0 last:rounded-e-lg text-sm font-medium focus:z-10 border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-slate-900 dark:border-gray-700 dark:text-white dark:hover:bg-gray-800 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-3 h-3",children:(0,s.jsx)("path",{d:"M9.82843 5L7.82843 7H4V19H20V7H16.1716L14.1716 5H9.82843ZM9 3H15L17 5H21C21.5523 5 22 5.44772 22 6V20C22 20.5523 21.5523 21 21 21H3C2.44772 21 2 20.5523 2 20V6C2 5.44772 2.44772 5 3 5H7L9 3ZM12 18C8.96243 18 6.5 15.5376 6.5 12.5C6.5 9.46243 8.96243 7 12 7C15.0376 7 17.5 9.46243 17.5 12.5C17.5 15.5376 15.0376 18 12 18ZM12 16C13.933 16 15.5 14.433 15.5 12.5C15.5 10.567 13.933 9 12 9C10.067 9 8.5 10.567 8.5 12.5C8.5 14.433 10.067 16 12 16Z"})})}),(0,s.jsx)("button",{type:"button",title:"Refresh",onClick:function(){window.location.reload()},className:"py-3 px-4 inline-flex items-center gap-x-2 -ms-px first:rounded-s-lg first:ms-0 last:rounded-e-lg text-sm font-medium focus:z-10 border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-slate-900 dark:border-gray-700 dark:text-white dark:hover:bg-gray-800 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-3 h-3",children:(0,s.jsx)("path",{d:"M5.46257 4.43262C7.21556 2.91688 9.5007 2 12 2C17.5228 2 22 6.47715 22 12C22 14.1361 21.3302 16.1158 20.1892 17.7406L17 12H20C20 7.58172 16.4183 4 12 4C9.84982 4 7.89777 4.84827 6.46023 6.22842L5.46257 4.43262ZM18.5374 19.5674C16.7844 21.0831 14.4993 22 12 22C6.47715 22 2 17.5228 2 12C2 9.86386 2.66979 7.88416 3.8108 6.25944L7 12H4C4 16.4183 7.58172 20 12 20C14.1502 20 16.1022 19.1517 17.5398 17.7716L18.5374 19.5674Z"})})}),(0,s.jsx)("button",{type:"button",title:"Profile Page",onClick:function(){return u(!l)},className:"py-3 px-4 inline-flex items-center gap-x-2 -ms-px first:rounded-s-lg first:ms-0 last:rounded-e-lg text-sm font-medium focus:z-10 border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-slate-900 dark:border-gray-700 dark:text-white dark:hover:bg-gray-800 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-3 h-3",children:(0,s.jsx)("path",{d:"M4 22C4 17.5817 7.58172 14 12 14C16.4183 14 20 17.5817 20 22H18C18 18.6863 15.3137 16 12 16C8.68629 16 6 18.6863 6 22H4ZM12 13C8.685 13 6 10.315 6 7C6 3.685 8.685 1 12 1C15.315 1 18 3.685 18 7C18 10.315 15.315 13 12 13ZM12 11C14.21 11 16 9.21 16 7C16 4.79 14.21 3 12 3C9.79 3 8 4.79 8 7C8 9.21 9.79 11 12 11Z"})})})]})}),w?(0,s.jsx)("div",{className:"border-2 rounded fixed p-6 w-full bg-gray-100 z-10",children:(0,s.jsx)(W,{currentTab:t,youtubeId:r,currentResourceId:n,setCurrentResourceId:i,createNewYoutubeResource:F,setYoutubeOpenAddNote:j,loadingNewYoutubeResource:D,setLoadingNewYoutubeResource:E})}):null,(0,s.jsx)("div",{id:"youtube-panel-content",children:x?(0,s.jsx)($,{currentTab:t}):A?(0,s.jsxs)("div",{children:[(0,s.jsx)(G,{}),(0,s.jsx)(G,{}),(0,s.jsx)(G,{}),(0,s.jsx)(G,{}),(0,s.jsx)(G,{}),(0,s.jsx)(G,{})]}):(0,s.jsx)(c,{subtitles:T,currentTabId:t.id,currentTime:L})})]})}var oe=r(64712);function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function le(e,t,r,n,a,s,o){try{var i=e[s](o),l=i.value}catch(c){return void r(c)}i.done?t(l):Promise.resolve(l).then(n,a)}function ce(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var s=e.apply(t,r);function o(e){le(s,n,a,o,i,"next",e)}function i(e){le(s,n,a,o,i,"throw",e)}o(void 0)}))}}function de(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,s=[],o=!0,i=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(s.push(n.value),!t||s.length!==t);o=!0);}catch(l){i=!0,a=l}finally{try{o||null==r.return||r.return()}finally{if(i)throw a}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ie(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ie(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function fe(){var e=ue(["\n    mutation ADD_NOTE($input: CreateIdealiteCardsInput!) {\n        createIdealiteCards(input: $input) {\n          document {\n            id\n          }\n        }\n      }"]);return fe=function(){return e},e}function ge(){var e=ue(["\n    mutation createAccountResource($input: CreateIdealiteAccountResourcesInput!) {\n        createIdealiteAccountResources(input: $input) {\n          document {\n            id\n          }\n        }\n      }\n      "]);return ge=function(){return e},e}function me(e){var t=e.currentResourceId,r=e.setCurrentResourceId,n=e.currentTab,i=e.setOpenAddNote,l=function(){return{scrollY:window.scrollY}},c=(0,y.cJ)().composeClient,u=n.id,h=(0,o.useState)(!1),x=h[0],b=h[1],v=(0,o.useState)(null),w=v[0],j=v[1],C=c.id,k=(0,o.useState)(!1),N=k[0],I=k[1],S=function(e){var t=e.split("&"),r=!0,n=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var i=s.value;if(i.startsWith("pg=GBS.PA"))return i.split("A")[1]}}catch(l){n=!0,a=l}finally{try{r||null==o.return||o.return()}finally{if(n)throw a}}return null},L=(0,d.Ps)(fe()),P=de((0,f.D)(L,{onCompleted:function(){return i(!1)},refetchQueries:["getCardsPeUrlPerUser"]}),2),H=P[0],A=P[1],M=(A.data,A.loading),V=A.error,O=(0,d.Ps)(ge()),Z=de((0,f.D)(O,{onError:function(e){return console.log("Error creating account resource: "+e.message)}}),1)[0],T=function(){var e=ce(a().mark((function e(){var t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,chrome.scripting.executeScript({target:{tabId:u},func:l});case 2:return t=e.sent,(r=t[0].result).scrollY=parseInt(r.scrollY),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=ce(a().mark((function e(){var t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:3000/api/createNewResource",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clientMutationId:C,url:n.url,title:n.title,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()})});case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Server responded with an error: "+t.status);case 5:return e.next=7,t.json();case 7:return r=e.sent,e.next=10,Z({variables:{input:{content:{recipient:C,resourceId:r.newResourceId,url:n.url,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),readingStatus:"READING"}}}});case 10:return e.abrupt("return",r.newResourceId);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=ce(a().mark((function e(t){var r,n,s,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).set("file",t),e.prev=2,e.next=5,fetch("http://localhost:3000/api/cardImage",{method:"POST",body:r});case 5:if((n=e.sent).ok){e.next=8;break}throw new Error("HTTP error! status: ".concat(n.status));case 8:return e.next=10,n.json();case 10:return s=e.sent,o=s.pinataData,e.abrupt("return",o);case 15:e.prev=15,e.t0=e.catch(2),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t){return e.apply(this,arguments)}}(),D=(0,g.jE)({extensions:[p.Z],editorProps:{attributes:{class:"prose prose-md lg:prose-lg dark:prose-invert outline outline-amber-400 max-w-full outline-offset-2 outline-2 rounded-md"}},content:""}),E=function(){var e=ce(a().mark((function e(){var s,o,l,c,d,u,f,g,m;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=t,t){e.next=11;break}return I(!0),e.next=5,R();case 5:if(s=e.sent){e.next=9;break}throw I(!1),new Error("Error creating new resource");case 9:r(s),I(!1);case 11:return console.log(s),e.next=14,T();case 14:if(o=e.sent,l=o.scrollY,c=D.getHTML(),!w){e.next=24;break}return e.next=21,z(w);case 21:f=e.sent,d=null===f||void 0===f?void 0:f.IpfsHash,u=null===f||void 0===f?void 0:f.PinSize;case 24:for(m in g={createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),annotation:c,cid:d,mimeType:null===w||void 0===w?void 0:w.type,pageYOffset:l,pinSize:u,resourceId:s,url:n.url,deleted:!1,googleBooksPage:S(n.url)})void 0!==g[m]&&null!==g[m]||delete g[m];H({variables:{input:{content:g}}}),i(!1);case 28:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return V?(V.message.includes("Capability does not have appropriate permissions to update this Stream")&&oe.A.error("Please re-login"),"Submission error! ".concat(V.message)):(0,s.jsxs)("div",{className:"flex flex-col pt-2",children:[(0,s.jsx)("div",{className:"flex justify-end mb-3",children:(0,s.jsx)("button",{className:"hover:bg-gray-300 rounded-xl",title:"Close Modal",onClick:function(){return i(!1)},children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-4 h-4",children:(0,s.jsx)("path",{d:"M12.0007 10.5865L16.9504 5.63672L18.3646 7.05093L13.4149 12.0007L18.3646 16.9504L16.9504 18.3646L12.0007 13.4149L7.05093 18.3646L5.63672 16.9504L10.5865 12.0007L5.63672 7.05093L7.05093 5.63672L12.0007 10.5865Z"})})})}),D&&(0,s.jsx)(g.NM,{editor:D,tippyOptions:{duration:100},children:(0,s.jsx)(m,{editor:D})}),(0,s.jsx)(g.kg,{editor:D,className:"".concat(x?"hidden":"")}),w&&(0,s.jsx)("img",{src:URL.createObjectURL(w),alt:"Pasted Image"}),x?(0,s.jsx)("input",{onPaste:function(e){var t=e.clipboardData;if(t&&t.items.length){var r=t.items[0];if(r.type.startsWith("image/")){var n=r.getAsFile();j(n),document.getElementById("input-image").disabled=!0}else{document.getElementById("paste-image").value=""}}},id:"paste-image",className:"".concat(w&&"hidden"," placeholder:italic placeholder:text-slate-400 block bg-white w-full border border-slate-300 rounded-md py-2 pr-3 shadow-sm focus:outline-none focus:border-sky-500 focus:ring-sky-500 focus:ring-1 sm:text-sm"),placeholder:"Paste image here",type:"text",name:"Paste Image",autoComplete:"off"}):null,(0,s.jsxs)("div",{className:"flex mt-3 justify-between items-center",children:[(0,s.jsx)("input",{type:"file",id:"input-image",onChange:function(e){return j(e.target.files[0])},className:"".concat(x?"":"invisible"," file:py-2 file:px-3 file:inline-flex file:items-center file:gap-x-2 file:text-sm file:font-semibold file:rounded-lg file:border file:border-transparent file:bg-blue-100 file:text-blue-800 file:hover:bg-blue-200 file:disabled:opacity-50 file:disabled:pointer-events-none file:dark:hover:bg-blue-900 file:dark:text-blue-400 file:dark:focus:outline-none file:dark:focus:ring-1 file:dark:focus:ring-gray-600")}),(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsx)("button",{onClick:function(){return b(!x)},className:"py-2 px-3 inline-flex items-center gap-x-2 text-sm font-semibold rounded-lg border border-transparent bg-blue-100 text-blue-800 hover:bg-blue-200 disabled:opacity-50 disabled:pointer-events-none dark:hover:bg-blue-900 dark:text-blue-400 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600",title:"Add an image",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-6 h-6",children:(0,s.jsx)("path",{d:"M2.9918 21C2.44405 21 2 20.5551 2 20.0066V3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082C21.556 3 22 3.44495 22 3.9934V20.0066C22 20.5552 21.5447 21 21.0082 21H2.9918ZM20 15V5H4V19L14 9L20 15ZM20 17.8284L14 11.8284L6.82843 19H20V17.8284ZM8 11C6.89543 11 6 10.1046 6 9C6 7.89543 6.89543 7 8 7C9.10457 7 10 7.89543 10 9C10 10.1046 9.10457 11 8 11Z"})})}),(0,s.jsxs)("button",{title:"Submit Note",onClick:function(){return E()},className:"py-2 px-3 inline-flex items-center gap-x-2 text-sm font-semibold rounded-lg border border-transparent bg-blue-100 text-blue-800 hover:bg-blue-200 disabled:opacity-50 disabled:pointer-events-none dark:hover:bg-blue-900 dark:text-blue-400 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600",children:[M?(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-3 h-3 animate-spin",children:(0,s.jsx)("path",{d:"M11.9995 2C12.5518 2 12.9995 2.44772 12.9995 3V6C12.9995 6.55228 12.5518 7 11.9995 7C11.4472 7 10.9995 6.55228 10.9995 6V3C10.9995 2.44772 11.4472 2 11.9995 2ZM11.9995 17C12.5518 17 12.9995 17.4477 12.9995 18V21C12.9995 21.5523 12.5518 22 11.9995 22C11.4472 22 10.9995 21.5523 10.9995 21V18C10.9995 17.4477 11.4472 17 11.9995 17ZM20.6597 7C20.9359 7.47829 20.772 8.08988 20.2937 8.36602L17.6956 9.86602C17.2173 10.1422 16.6057 9.97829 16.3296 9.5C16.0535 9.02171 16.2173 8.41012 16.6956 8.13398L19.2937 6.63397C19.772 6.35783 20.3836 6.52171 20.6597 7ZM7.66935 14.5C7.94549 14.9783 7.78161 15.5899 7.30332 15.866L4.70525 17.366C4.22695 17.6422 3.61536 17.4783 3.33922 17C3.06308 16.5217 3.22695 15.9101 3.70525 15.634L6.30332 14.134C6.78161 13.8578 7.3932 14.0217 7.66935 14.5ZM20.6597 17C20.3836 17.4783 19.772 17.6422 19.2937 17.366L16.6956 15.866C16.2173 15.5899 16.0535 14.9783 16.3296 14.5C16.6057 14.0217 17.2173 13.8578 17.6956 14.134L20.2937 15.634C20.772 15.9101 20.9359 16.5217 20.6597 17ZM7.66935 9.5C7.3932 9.97829 6.78161 10.1422 6.30332 9.86602L3.70525 8.36602C3.22695 8.08988 3.06308 7.47829 3.33922 7C3.61536 6.52171 4.22695 6.35783 4.70525 6.63397L7.30332 8.13398C7.78161 8.41012 7.94549 9.02171 7.66935 9.5Z"})}):null,"Submit"]})]})]}),N?(0,s.jsx)("div",{className:"text-right",children:"Creating New Resource..."}):null]})}function pe(e){var t=e.currentTab,r=e.setCurrentResourceId,n=e.currentResourceId,a=e.setLoggedIn,i=e.loggedIn,l=(0,o.useState)(!1),c=l[0],d=l[1],u=(t||"").title;return(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsx)("div",{id:"article-panel-menu",className:"flex justify-center my-5",children:(0,s.jsxs)("div",{className:"fixed top-0 z-20",children:[(0,s.jsx)("button",{type:"button",title:"Add Note",onClick:function(){return d(!c)},className:"py-3 px-4 inline-flex items-center gap-x-2 -ms-px first:rounded-s-lg first:ms-0 last:rounded-e-lg text-sm font-medium focus:z-10 border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-slate-900 dark:border-gray-700 dark:text-white dark:hover:bg-gray-800 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-3 h-3",children:(0,s.jsx)("path",{d:"M15 4H5V20H19V8H15V4ZM3 2.9918C3 2.44405 3.44749 2 3.9985 2H16L20.9997 7L21 20.9925C21 21.5489 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5447 3 21.0082V2.9918ZM11 11V8H13V11H16V13H13V16H11V13H8V11H11Z"})})}),(0,s.jsx)("button",{type:"button",title:"Refresh",onClick:function(){window.location.reload()},className:"py-3 px-4 inline-flex items-center gap-x-2 -ms-px first:rounded-s-lg first:ms-0 last:rounded-e-lg text-sm font-medium focus:z-10 border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-slate-900 dark:border-gray-700 dark:text-white dark:hover:bg-gray-800 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-3 h-3",children:(0,s.jsx)("path",{d:"M5.46257 4.43262C7.21556 2.91688 9.5007 2 12 2C17.5228 2 22 6.47715 22 12C22 14.1361 21.3302 16.1158 20.1892 17.7406L17 12H20C20 7.58172 16.4183 4 12 4C9.84982 4 7.89777 4.84827 6.46023 6.22842L5.46257 4.43262ZM18.5374 19.5674C16.7844 21.0831 14.4993 22 12 22C6.47715 22 2 17.5228 2 12C2 9.86386 2.66979 7.88416 3.8108 6.25944L7 12H4C4 16.4183 7.58172 20 12 20C14.1502 20 16.1022 19.1517 17.5398 17.7716L18.5374 19.5674Z"})})}),(0,s.jsx)("button",{type:"button",title:"Profile Page",onClick:function(){return a(!i)},className:"py-3 px-4 inline-flex items-center gap-x-2 -ms-px first:rounded-s-lg first:ms-0 last:rounded-e-lg text-sm font-medium focus:z-10 border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-slate-900 dark:border-gray-700 dark:text-white dark:hover:bg-gray-800 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-3 h-3",children:(0,s.jsx)("path",{d:"M4 22C4 17.5817 7.58172 14 12 14C16.4183 14 20 17.5817 20 22H18C18 18.6863 15.3137 16 12 16C8.68629 16 6 18.6863 6 22H4ZM12 13C8.685 13 6 10.315 6 7C6 3.685 8.685 1 12 1C15.315 1 18 3.685 18 7C18 10.315 15.315 13 12 13ZM12 11C14.21 11 16 9.21 16 7C16 4.79 14.21 3 12 3C9.79 3 8 4.79 8 7C8 9.21 9.79 11 12 11Z"})})})]})}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-pretty text-center",children:u}),c?(0,s.jsx)("div",{className:"border-2 rounded fixed p-4 w-full bg-gray-100 z-10",children:(0,s.jsx)(me,{currentTab:t,currentResourceId:n,setCurrentResourceId:r,setOpenAddNote:d})}):null,(0,s.jsx)(U,{currentTab:t})]})}var he=r(34329),xe=r(37706),be=r(10952),ve=r(7212);function we(e,t,r,n,a,s,o){try{var i=e[s](o),l=i.value}catch(c){return void r(c)}i.done?t(l):Promise.resolve(l).then(n,a)}function ye(e){var t=e.userProfile,r=(0,y.cJ)(),n=r.ceramic,i=r.composeClient,l=i.id,c=l?l.substring(l.length-5):"0x...",d=(0,o.useState)(!1),u=d[0],f=d[1],g=function(){var e,t=(e=a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=(0,ve.yj)())||oe.A.error("Please install Metamask."),e.next=4,t.request({method:"eth_chainId"});case 4:if("0xa"===e.sent){e.next=8;break}return oe.A.info("Please switch to the Optimism network."),e.abrupt("return");case 8:return localStorage.setItem("ceramic:auth_type","eth"),e.next=11,(0,xe.M)(n,i);case 11:e.sent&&window.location.reload();case 13:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var s=e.apply(t,r);function o(e){we(s,n,a,o,i,"next",e)}function i(e){we(s,n,a,o,i,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}();return(0,o.useEffect)((function(){localStorage.getItem("logged_in")&&f(!0)}),[]),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsxs)(be.fC,{children:[(0,s.jsx)(be.Ee,{}),(0,s.jsx)(be.NY,{children:(0,s.jsx)("span",{class:"bg-yellow-100 text-yellow-800 text-xs font-medium me-2 px-2.5 py-0.5 rounded-full dark:bg-yellow-900 dark:text-yellow-300",children:t.displayName?t.displayName:"0x...".concat(c)})})]})}),(0,s.jsxs)("div",{className:"flex flex-col justify-center space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("img",{src:"/next-assets/icon32.png",className:"w-16 h-16 object-cover rounded-full",alt:"Idealite logo"}),(0,s.jsx)("p",{className:"text-4xl font-bold",children:"Idealite"})]}),u?(0,s.jsxs)("button",{type:"button",onClick:function(){return localStorage.removeItem("logged_in"),localStorage.removeItem("ceramic:did_seed"),localStorage.removeItem("ceramic:eth_did"),localStorage.removeItem("did"),localStorage.removeItem("ceramic:auth_type"),void window.location.reload()},className:"py-3 px-4 inline-flex items-center gap-x-2 text-sm font-semibold rounded-lg border border-transparent bg-gray-100 text-gray-800 hover:bg-gray-200 disabled:opacity-50 disabled:pointer-events-none dark:bg-white/10 dark:hover:bg-white/20 dark:text-white dark:hover:text-white dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-6 h-6",children:(0,s.jsx)("path",{d:"M4 18H6V20H18V4H6V6H4V3C4 2.44772 4.44772 2 5 2H19C19.5523 2 20 2.44772 20 3V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V18ZM6 11H13V13H6V16L1 12L6 8V11Z"})}),"Logout"]}):(0,s.jsx)("button",{onClick:function(){return g()},className:"py-3 px-4 inline-flex items-center justify-around gap-x-2 text-sm font-semibold rounded-lg border border-transparent bg-yellow-500 text-white hover:bg-yellow-600 disabled:opacity-50 disabled:pointer-events-none dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600",children:"Login"})]}),(0,s.jsx)("button",{type:"button",onClick:function(){return window.location.reload()},className:"fixed top-0 left-0 flex justify-center items-center h-10 w-10 text-sm font-semibold rounded-full border border-transparent bg-gray-300 text-white hover:bg-gray-400 disabled:opacity-50 disabled:pointer-events-none dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-12 h-12",children:(0,s.jsx)("path",{d:"M10.8284 12.0007L15.7782 16.9504L14.364 18.3646L8 12.0007L14.364 5.63672L15.7782 7.05093L10.8284 12.0007Z"})})})]})}var je=r(73359);function Ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ke(e,t,r,n,a,s,o){try{var i=e[s](o),l=i.value}catch(c){return void r(c)}i.done?t(l):Promise.resolve(l).then(n,a)}function Ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,s=[],o=!0,i=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(s.push(n.value),!t||s.length!==t);o=!0);}catch(l){i=!0,a=l}finally{try{o||null==r.return||r.return()}finally{if(i)throw a}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ce(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ce(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ie(){var e,t,r=(e=["\n    mutation createAccountResource($input: CreateIdealiteAccountResourcesInput!) {\n        createIdealiteAccountResources(input: $input) {\n          document {\n            id\n          }\n        }\n      }\n      "],t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})));return Ie=function(){return r},r}function Se(e){var t=e.author,r=e.title,n=e.coverUrl,o=e.published,i=e.firstSentence,l=e.currentUrl,c=e.setCurrentResourceId,u=(0,y.cJ)().composeClient.id,g=(0,d.Ps)(Ie()),m=Ne((0,f.D)(g,{onError:function(e){return console.log("Error creating account resource: "+e.message)}}),1)[0],p=function(){var e,n=(e=a().mark((function e(){var n,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:3000/api/createNewBookResource",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:r,clientMutationId:u,author:t,url:l,description:i,publishedAt:o})});case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("Server responded with an error: "+n.status);case 5:return e.next=7,n.json();case 7:return s=e.sent,e.next=10,m({variables:{input:{content:{recipient:u,resourceId:s.newResourceId,url:l,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),readingStatus:"READING"}}}});case 10:return s.newResourceId&&(oe.A.success("Successfully added book."),c(s.newResourceId),setTimeout((function(){window.location.reload()}),1e3)),e.abrupt("return");case 12:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var s=e.apply(t,r);function o(e){ke(s,n,a,o,i,"next",e)}function i(e){ke(s,n,a,o,i,"throw",e)}o(void 0)}))});return function(){return n.apply(this,arguments)}}();return(0,s.jsxs)("div",{className:"flex justify-center space-x-2 p-2 rounded-lg border border-slate-200 bg-white shadow-sm hover:bg-slate-400",onClick:function(){return p()},children:[(0,s.jsx)("img",{src:n,alt:r}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("p",{className:"text-xl font-semibold leading-none tracking-tight",children:r}),(0,s.jsx)("p",{className:"text-sm text-slate-500",children:t}),(0,s.jsxs)("p",{className:"text-sm text-slate-500",children:["Published: ",o]})]})]})}function Le(){return(0,s.jsxs)("div",{className:"space-y-4 p-6 max-w-md mx-auto",children:[(0,s.jsxs)("div",{className:"flex justify-center space-x-2 p-2 rounded-lg border border-slate-200 bg-white shadow-sm animate-pulse",children:[(0,s.jsx)("div",{className:"h-24 w-40 bg-slate-400"}),(0,s.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,s.jsx)("div",{className:"mt-1 w-44 h-8 bg-slate-400"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"mt-1 w-32 h-4 bg-slate-400"}),(0,s.jsx)("div",{className:"mt-1 w-32 h-4 bg-slate-400"})]})]})]}),(0,s.jsxs)("div",{className:"flex justify-center space-x-2 p-2 rounded-lg border border-slate-200 bg-white shadow-sm animate-pulse",children:[(0,s.jsx)("div",{className:"h-24 w-40 bg-slate-400"}),(0,s.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,s.jsx)("div",{className:"mt-1 w-44 h-8 bg-slate-400"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"mt-1 w-32 h-4 bg-slate-400"}),(0,s.jsx)("div",{className:"mt-1 w-32 h-4 bg-slate-400"})]})]})]}),(0,s.jsxs)("div",{className:"flex justify-center space-x-2 p-2 rounded-lg border border-slate-200 bg-white shadow-sm animate-pulse",children:[(0,s.jsx)("div",{className:"h-24 w-40 bg-slate-400"}),(0,s.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,s.jsx)("div",{className:"mt-1 w-44 h-8 bg-slate-400"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"mt-1 w-32 h-4 bg-slate-400"}),(0,s.jsx)("div",{className:"mt-1 w-32 h-4 bg-slate-400"})]})]})]}),(0,s.jsxs)("div",{className:"flex justify-center space-x-2 p-2 rounded-lg border border-slate-200 bg-white shadow-sm animate-pulse",children:[(0,s.jsx)("div",{className:"h-24 w-40 bg-slate-400"}),(0,s.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,s.jsx)("div",{className:"mt-1 w-44 h-8 bg-slate-400"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"mt-1 w-32 h-4 bg-slate-400"}),(0,s.jsx)("div",{className:"mt-1 w-32 h-4 bg-slate-400"})]})]})]})]})}function Pe(e){var t=e.currentUrl,r=e.loggedIn,n=e.setLoggedIn,a=e.setCurrentResourceId,i=(0,o.useState)(""),l=i[0],c=i[1],d=(0,o.useState)([]),u=d[0],f=d[1],g=(0,o.useState)(10),m=g[0],p=(g[1],(0,o.useState)(1)),h=p[0],x=p[1],b=(0,o.useState)(!1),v=b[0],w=b[1];return(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsx)("div",{id:"article-panel-menu",className:"flex justify-center my-5",children:(0,s.jsxs)("div",{className:"fixed top-0 z-20",children:[(0,s.jsx)("button",{type:"button",title:"Refresh",onClick:function(){window.location.reload()},className:"py-3 px-4 inline-flex items-center gap-x-2 -ms-px first:rounded-s-lg first:ms-0 last:rounded-e-lg text-sm font-medium focus:z-10 border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-slate-900 dark:border-gray-700 dark:text-white dark:hover:bg-gray-800 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-3 h-3",children:(0,s.jsx)("path",{d:"M5.46257 4.43262C7.21556 2.91688 9.5007 2 12 2C17.5228 2 22 6.47715 22 12C22 14.1361 21.3302 16.1158 20.1892 17.7406L17 12H20C20 7.58172 16.4183 4 12 4C9.84982 4 7.89777 4.84827 6.46023 6.22842L5.46257 4.43262ZM18.5374 19.5674C16.7844 21.0831 14.4993 22 12 22C6.47715 22 2 17.5228 2 12C2 9.86386 2.66979 7.88416 3.8108 6.25944L7 12H4C4 16.4183 7.58172 20 12 20C14.1502 20 16.1022 19.1517 17.5398 17.7716L18.5374 19.5674Z"})})}),(0,s.jsx)("button",{type:"button",title:"Profile Page",onClick:function(){return n(!r)},className:"py-3 px-4 inline-flex items-center gap-x-2 -ms-px first:rounded-s-lg first:ms-0 last:rounded-e-lg text-sm font-medium focus:z-10 border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-slate-900 dark:border-gray-700 dark:text-white dark:hover:bg-gray-800 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-3 h-3",children:(0,s.jsx)("path",{d:"M4 22C4 17.5817 7.58172 14 12 14C16.4183 14 20 17.5817 20 22H18C18 18.6863 15.3137 16 12 16C8.68629 16 6 18.6863 6 22H4ZM12 13C8.685 13 6 10.315 6 7C6 3.685 8.685 1 12 1C15.315 1 18 3.685 18 7C18 10.315 15.315 13 12 13ZM12 11C14.21 11 16 9.21 16 7C16 4.79 14.21 3 12 3C9.79 3 8 4.79 8 7C8 9.21 9.79 11 12 11Z"})})})]})}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-pretty text-center",children:"Add Book To Your Library"}),(0,s.jsxs)("form",{onSubmit:function(e){w(!0),e.preventDefault(),x(1);var t=encodeURIComponent(l),r="https://openlibrary.org/search.json?title=".concat(t,"&limit=").concat(m,"&page=").concat(h);fetch(r).then((function(e){return e.json()})).then((function(e){f(e.docs)})).catch((function(e){oe.A.error("Something went wrong!"),console.log(e.message)})),w(!1)},className:"flex flex-col justify-center",children:[(0,s.jsx)("label",{for:"book-search",className:"flex justify-center",children:"Search for Open Library for your Book:"}),(0,s.jsxs)("div",{className:"flex justify-center",children:[(0,s.jsx)("button",{type:"submit",className:"flex justify-center items-center h-10 rounded-md w-10 border border-slate-200",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-6 h-6",children:(0,s.jsx)("path",{d:"M18.031 16.6168L22.3137 20.8995L20.8995 22.3137L16.6168 18.031C15.0769 19.263 13.124 20 11 20C6.032 20 2 15.968 2 11C2 6.032 6.032 2 11 2C15.968 2 20 6.032 20 11C20 13.124 19.263 15.0769 18.031 16.6168ZM16.0247 15.8748C17.2475 14.6146 18 12.8956 18 11C18 7.1325 14.8675 4 11 4C7.1325 4 4 7.1325 4 11C4 14.8675 7.1325 18 11 18C12.8956 18 14.6146 17.2475 15.8748 16.0247L16.0247 15.8748Z"})})}),(0,s.jsx)("input",{id:"book-search",placeholder:"Click here to edit.",value:l,onChange:function(e){return c(e.target.value)},className:"flex h-10 w-2/3 rounded-md border border-slate-200 bg-white px-3 py-2 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-slate-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-950 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:border-slate-800 dark:bg-slate-950 dark:ring-offset-slate-950 dark:placeholder:text-slate-400 dark:focus-visible:ring-slate-300"})]})]}),(0,s.jsxs)("div",{children:[v?(0,s.jsx)(Le,{}):null,u&&u.length>0?(0,s.jsxs)("div",{className:"space-y-4 p-6 max-w-md mx-auto",children:[(0,s.jsx)("p",{children:"Select your book:"}),u.map((function(e){return(0,s.jsx)(Se,{title:e.title?e.title:"",author:(null===e||void 0===e?void 0:e.author_name)?null===e||void 0===e?void 0:e.author_name[0]:"",firstSentence:(null===e||void 0===e?void 0:e.first_sentence)?null===e||void 0===e?void 0:e.first_sentence[0]:"",published:(null===e||void 0===e?void 0:e.first_publish_year)?e.first_publish_year:0,coverUrl:"https://covers.openlibrary.org/b/id/".concat(null===e||void 0===e?void 0:e.cover_i,"-S.jpg"),currentUrl:t,setCurrentResourceId:a},e.key)}))]}):(0,s.jsx)("p",{className:"flex justify-center text-lg",children:"No results yet."})]}),(0,s.jsx)("div",{className:"flex justify-end pr-4 pb-4",children:u&&u.length>0?(0,s.jsx)("button",{className:"h-9 rounded-md px-3 inline-flex items-center content-end whitespace-nowrap rounded-md text-sm font-medium ring-offset-white transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 dark:ring-offset-slate-950 dark:focus-visible:ring-slate-300 bg-slate-100 text-slate-900 hover:bg-slate-100/80 dark:bg-slate-800 dark:text-slate-50 dark:hover:bg-slate-800/80",onClick:function(e){!function(e){w(!0),e.preventDefault();var t=encodeURIComponent(l),r="https://openlibrary.org/search.json?title=".concat(t,"&limit=").concat(m,"&page=").concat(h+1);fetch(r).then((function(e){return e.json()})).then((function(e){f(e.docs)})).catch((function(e){oe.A.error("Something went wrong!"),console.log(e.message)})),x(h+1),w(!1)}(e)},children:"Next"}):null})]})}function He(){var e,t,r=(e=["\n    query checkIdealiteAccountResourcesForBook($url: String) {\n        viewer {\n            recipientOfIdealiteAccountResourcesList(first: 1, filters: {where: {url: {equalTo: $url}}}) {\n            edges {\n              node {\n                id\n              }\n            }\n          }\n        }\n      }\n    "],t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})));return He=function(){return r},r}function Ae(e){var t,r=e.currentTab,n=e.setCurrentResourceId,a=e.currentResourceId,i=e.setLoggedIn,l=e.loggedIn,c=(0,o.useState)(!1),f=c[0],g=c[1],m=r||"",p=(m.title,function(e){var t=e.indexOf("&");if(t>-1)return e.substring(0,t)}(m.url)),h=(0,d.Ps)(He()),x=(0,u.a)(h,{variables:{url:p}}),b=(x.loading,x.error,x.data);return 0===(null===b||void 0===b||null===(t=b.viewer)||void 0===t?void 0:t.recipientOfIdealiteAccountResourcesList.edges.length)?(0,s.jsx)(Pe,{setCurrentResourceId:n,currentUrl:p,loggedIn:l,setLoggedIn:i}):(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsx)("div",{id:"article-panel-menu",className:"flex justify-center my-5",children:(0,s.jsxs)("div",{className:"fixed top-0 z-20",children:[(0,s.jsx)("button",{type:"button",title:"Add Note",onClick:function(){return g(!f)},className:"py-3 px-4 inline-flex items-center gap-x-2 -ms-px first:rounded-s-lg first:ms-0 last:rounded-e-lg text-sm font-medium focus:z-10 border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-slate-900 dark:border-gray-700 dark:text-white dark:hover:bg-gray-800 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-3 h-3",children:(0,s.jsx)("path",{d:"M15 4H5V20H19V8H15V4ZM3 2.9918C3 2.44405 3.44749 2 3.9985 2H16L20.9997 7L21 20.9925C21 21.5489 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5447 3 21.0082V2.9918ZM11 11V8H13V11H16V13H13V16H11V13H8V11H11Z"})})}),(0,s.jsx)("button",{type:"button",title:"Refresh",onClick:function(){window.location.reload()},className:"py-3 px-4 inline-flex items-center gap-x-2 -ms-px first:rounded-s-lg first:ms-0 last:rounded-e-lg text-sm font-medium focus:z-10 border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-slate-900 dark:border-gray-700 dark:text-white dark:hover:bg-gray-800 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-3 h-3",children:(0,s.jsx)("path",{d:"M5.46257 4.43262C7.21556 2.91688 9.5007 2 12 2C17.5228 2 22 6.47715 22 12C22 14.1361 21.3302 16.1158 20.1892 17.7406L17 12H20C20 7.58172 16.4183 4 12 4C9.84982 4 7.89777 4.84827 6.46023 6.22842L5.46257 4.43262ZM18.5374 19.5674C16.7844 21.0831 14.4993 22 12 22C6.47715 22 2 17.5228 2 12C2 9.86386 2.66979 7.88416 3.8108 6.25944L7 12H4C4 16.4183 7.58172 20 12 20C14.1502 20 16.1022 19.1517 17.5398 17.7716L18.5374 19.5674Z"})})}),(0,s.jsx)("button",{type:"button",title:"Profile Page",onClick:function(){return i(!l)},className:"py-3 px-4 inline-flex items-center gap-x-2 -ms-px first:rounded-s-lg first:ms-0 last:rounded-e-lg text-sm font-medium focus:z-10 border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-slate-900 dark:border-gray-700 dark:text-white dark:hover:bg-gray-800 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-3 h-3",children:(0,s.jsx)("path",{d:"M4 22C4 17.5817 7.58172 14 12 14C16.4183 14 20 17.5817 20 22H18C18 18.6863 15.3137 16 12 16C8.68629 16 6 18.6863 6 22H4ZM12 13C8.685 13 6 10.315 6 7C6 3.685 8.685 1 12 1C15.315 1 18 3.685 18 7C18 10.315 15.315 13 12 13ZM12 11C14.21 11 16 9.21 16 7C16 4.79 14.21 3 12 3C9.79 3 8 4.79 8 7C8 9.21 9.79 11 12 11Z"})})})]})}),f?(0,s.jsx)("div",{className:"border-2 rounded fixed p-4 w-full bg-gray-100 z-10",children:(0,s.jsx)(me,{currentTab:r,currentResourceId:a,setCurrentResourceId:n,setOpenAddNote:g})}):null,(0,s.jsx)(U,{currentTab:r})]})}function Me(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ve(e,t,r,n,a,s,o){try{var i=e[s](o),l=i.value}catch(c){return void r(c)}i.done?t(l):Promise.resolve(l).then(n,a)}function Oe(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var s=e.apply(t,r);function o(e){Ve(s,n,a,o,i,"next",e)}function i(e){Ve(s,n,a,o,i,"throw",e)}o(void 0)}))}}function Ze(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,s=[],o=!0,i=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(s.push(n.value),!t||s.length!==t);o=!0);}catch(l){i=!0,a=l}finally{try{o||null==r.return||r.return()}finally{if(i)throw a}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Me(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Me(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Te(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function Re(){var e=Te(["\n  query getResourceId($url: String!) {\n    idealiteResourceIndex(filters: {where: {url: {equalTo: $url}}}, first: 1) {\n      edges {\n        node {\n          id\n        }\n      }\n    }\n  }\n  "]);return Re=function(){return e},e}function ze(){var e=Te(["\n  query getUserProfile {\n    viewer {\n      idealiteProfile {\n        bio\n        avatarCid\n        displayName\n      }\n    }\n  }\n  "]);return ze=function(){return e},e}var De=function(e){var t=e.loggedIn,r=e.setLoggedIn,n=(0,o.useState)(""),i=n[0],l=n[1],c=(0,o.useState)({}),u=c[0],f=c[1],g=(0,o.useState)(""),m=g[0],p=g[1],h=(0,o.useState)(""),x=h[0],b=h[1],v=(0,y.SE)(),w=v.userProfile,j=v.getUserDetails,C=function(){var e=Oe(a().mark((function e(){var t,r,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={active:!0,lastFocusedWindow:!0},e.t0=Ze,e.next=4,chrome.tabs.query(t);case 4:return e.t1=e.sent,r=(0,e.t0)(e.t1,1),n=r[0],e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=(0,d.Ps)(Re()),N=(0,d.Ps)(ze()),I=Ze((0,je.t)(k,{variables:{url:u.url},onCompleted:function(e){e&&e.idealiteResourceIndex.edges.length>0&&e.idealiteResourceIndex.edges[0].node.id&&l(e.idealiteResourceIndex.edges[0].node.id)}}),1)[0],S=Ze((0,je.t)(N,{onCompleted:function(e){null!==e.viewer&&j({displayName:e.viewer.idealiteProfile.displayName,avatarCid:e.viewer.idealiteProfile.avatarCid,bio:e.viewer.idealiteProfile.bio})}}),1)[0],L=function(){var e=Oe(a().mark((function e(){var t,r,n,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:return t=e.sent,f(t),e.next=6,S();case 6:if(!t.url.includes("youtube")){e.next=11;break}return(r=(0,he.Z)(t.url).id)&&(n="https://www.youtube.com/watch?v="+r,t.url=n,f(t),p(r)),b("youtube"),e.abrupt("return");case 11:if(!t.url.includes("play.google.com/books/reader")){e.next=15;break}return f(t),b("googleplay"),e.abrupt("return");case 15:s=new URL(t.url),t.url=s.origin+s.pathname,f(t),b("article");case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){L(),I()}),[]),t?(0,s.jsxs)("div",{className:"dark:bg-gray-800 h-screen",children:["youtube"===x?(0,s.jsx)(se,{currentTab:u,youtubeId:m,currentResourceId:i,setCurrentResourceId:l,loggedIn:t,setLoggedIn:r}):null,"googleplay"===x?(0,s.jsx)(Ae,{currentTab:u,currentResourceId:i,setCurrentResourceId:l,loggedIn:t,setLoggedIn:r}):null,"article"===x?(0,s.jsx)(pe,{currentTab:u,setCurrentResourceId:l,currentResourceId:i,loggedIn:t,setLoggedIn:r}):null]}):(0,s.jsx)("div",{className:"dark:bg-gray-800 h-screen flex justify-center items-center",children:(0,s.jsx)(ye,{userProfile:w})})}}},function(e){e.O(0,[911,406,774,888,179],(function(){return t=78581,e(e.s=t);var t}));var t=e.O();_N_E=t}]);